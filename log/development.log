  [1m[36m (114.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (0.9ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (7.1ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'schema_migrations'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (5.0ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations"("version" )
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35mextensions (0.5ms)[0m  select extname from pg_extension
  [1m[36m (0.7ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (121.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying(255) DEFAULT '' NOT NULL, "encrypted_password" character varying(255) DEFAULT '' NOT NULL, "authentication_token" character varying(255), "reset_password_token" character varying(255), "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (4.9ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (1.9ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users"("email" )
  [1m[36m (5.2ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35mColumns for index index_users_on_email on users (1.0ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 24965
 AND a.attnum IN (2)

  [1m[36m (1.5ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users"("reset_password_token" )[0m
  [1m[35m (43.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130111192008')
  [1m[36m (2.8ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.9ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36mextensions (1.5ms)[0m  [1mselect extname from pg_extension[0m
  [1m[35mPK and serial sequence (5.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass

  [1m[36m (0.7ms)[0m  [1mSELECT opcname FROM pg_opclass[0m
  [1m[35m (4.9ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_email on users (1.0ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 24965
 AND a.attnum IN (2)
[0m
  [1m[35mColumns for index index_users_on_reset_password_token on users (0.5ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 24965
 AND a.attnum IN (5)

  [1m[36m (0.4ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
  [1m[35m (0.9ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36mextensions (0.6ms)[0m  [1mselect extname from pg_extension[0m
  [1m[35mPK and serial sequence (4.1ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass

  [1m[36m (0.6ms)[0m  [1mSELECT opcname FROM pg_opclass[0m
  [1m[35m (4.6ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_email on users (0.6ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 24965
 AND a.attnum IN (2)
[0m
  [1m[35mColumns for index index_users_on_reset_password_token on users (0.4ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 24965
 AND a.attnum IN (5)



Started GET "/assets/rails.png" for 127.0.0.1 at 2013-01-11 11:30:01 -0800
Served asset /rails.png - 304 Not Modified (7ms)


Started GET "/user" for 127.0.0.1 at 2013-01-11 11:30:05 -0800

ActionController::RoutingError (No route matches [GET] "/user"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)


Started GET "/users" for 127.0.0.1 at 2013-01-11 11:30:07 -0800

ActionController::RoutingError (No route matches [GET] "/users"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/users/" for 127.0.0.1 at 2013-01-11 11:30:10 -0800

ActionController::RoutingError (No route matches [GET] "/users"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-01-11 11:31:36 -0800
Served asset /rails.png - 304 Not Modified (0ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2013-01-11 11:31:40 -0800
Processing by Devise::RegistrationsController#new as HTML
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/devise-2.2.1/app/views/devise/shared/_links.erb (2.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/devise-2.2.1/app/views/devise/registrations/new.html.erb within layouts/application (61.8ms)
Compiled api/app_login.css  (39ms)  (pid 53070)
Compiled application.css  (102ms)  (pid 53070)
Compiled jquery.js  (2ms)  (pid 53070)
Compiled jquery_ujs.js  (0ms)  (pid 53070)
Compiled api/app_login.js  (567ms)  (pid 53070)
Compiled application.js  (728ms)  (pid 53070)
Completed 200 OK in 1206ms (Views: 1002.9ms | ActiveRecord: 15.7ms)


Started GET "/assets/api/app_login.css?body=1" for 127.0.0.1 at 2013-01-11 11:31:41 -0800
Served asset /api/app_login.css - 200 OK (3ms)


Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2013-01-11 11:31:41 -0800
Served asset /application.css - 304 Not Modified (5ms)


Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2013-01-11 11:31:41 -0800
Served asset /jquery.js - 304 Not Modified (7ms)


Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2013-01-11 11:31:41 -0800
Served asset /jquery_ujs.js - 304 Not Modified (5ms)


Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2013-01-11 11:31:41 -0800
Served asset /application.js - 304 Not Modified (8ms)


Started GET "/assets/api/app_login.js?body=1" for 127.0.0.1 at 2013-01-11 11:31:41 -0800
Served asset /api/app_login.js - 200 OK (2ms)


Started POST "/users" for 127.0.0.1 at 2013-01-11 11:31:53 -0800
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"GGvHE4DySiJZb0mTPFFVath+vx0BaZeI5QIxm40UHFA=", "user"=>{"email"=>"jorgemoscat@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT 1 FROM "users" WHERE "users"."email" = 'jorgemoscat@gmail.com' LIMIT 1
  [1m[36mSQL (71.7ms)[0m  [1mINSERT INTO "users" ("authentication_token", "created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "reset_password_sent_at", "reset_password_token", "sign_in_count", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13) RETURNING "id"[0m  [["authentication_token", nil], ["created_at", Fri, 11 Jan 2013 19:31:53 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "jorgemoscat@gmail.com"], ["encrypted_password", "$2a$10$2CZA13clCOT5nY4sJE5tyuIarcRP4M2s0EkvrZDb8y.vmVNcr.xuC"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["reset_password_sent_at", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Fri, 11 Jan 2013 19:31:53 UTC +00:00]]
  [1m[35m (0.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  UPDATE "users" SET "last_sign_in_at" = '2013-01-11 19:31:53.700536', "current_sign_in_at" = '2013-01-11 19:31:53.700536', "last_sign_in_ip" = '127.0.0.1', "current_sign_in_ip" = '127.0.0.1', "sign_in_count" = 1, "updated_at" = '2013-01-11 19:31:53.701645' WHERE "users"."id" = 1
  [1m[36m (0.5ms)[0m  [1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 268ms (ActiveRecord: 0.0ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-01-11 11:31:53 -0800
Served asset /rails.png - 304 Not Modified (0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:33:38 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (#<RuntimeError: Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144">
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:154:in `block in check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `scan'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:119:in `initialize'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `new'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `parse'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `new'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini.rb:80:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:210:in `context'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:205:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/query_cache.rb:64:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `_run__835062838083044612__call__978935925004468909__callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:26:in `call_app'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/static.rb:61:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:479:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:220:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
...
Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144"
Line: 1
Position: 46
Last 80 unconsumed characters:
):
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__835062838083044612__call__978935925004468909__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.1ms)


Started GET "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:33:57 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.7ms)


Started GET "/api/app_login" for 127.0.0.1 at 2013-01-11 11:34:04 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-01-11 11:34:09 -0800
Served asset /rails.png - 304 Not Modified (0ms)


Started GET "/api/app_login" for 127.0.0.1 at 2013-01-11 11:35:47 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/api/app_login" for 127.0.0.1 at 2013-01-11 11:35:48 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.8ms)


Started GET "/api/app_login" for 127.0.0.1 at 2013-01-11 11:35:48 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/users/api/app_login" for 127.0.0.1 at 2013-01-11 11:40:33 -0800

ActionController::RoutingError (No route matches [GET] "/users/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/users/api/app_login" for 127.0.0.1 at 2013-01-11 11:40:35 -0800

ActionController::RoutingError (No route matches [GET] "/users/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/users/app_login:" for 127.0.0.1 at 2013-01-11 11:40:41 -0800

ActionController::RoutingError (No route matches [GET] "/users/app_login:"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/api/v1/tokens.json" for 127.0.0.1 at 2013-01-11 11:42:23 -0800

ActionController::RoutingError (No route matches [GET] "/api/v1/tokens.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/api/v1/app_login.json" for 127.0.0.1 at 2013-01-11 11:42:37 -0800

ActionController::RoutingError (No route matches [GET] "/api/v1/app_login.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:42:41 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/api/app_login/app_login.json" for 127.0.0.1 at 2013-01-11 11:43:55 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login/app_login.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:44:32 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (856.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (874.2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:44:51 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (#<RuntimeError: Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144">
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:154:in `block in check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `scan'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:119:in `initialize'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `new'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `parse'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `new'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini.rb:80:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:210:in `context'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:205:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/query_cache.rb:64:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:26:in `call_app'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/static.rb:61:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:479:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:220:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
...
Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144"
Line: 1
Position: 46
Last 80 unconsumed characters:
):
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (13.6ms)


Started GET "/api/app_login/" for 127.0.0.1 at 2013-01-11 11:46:59 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:47:04 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (20.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:47:12 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (#<RuntimeError: Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144">
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:154:in `block in check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `scan'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:119:in `initialize'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `new'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `parse'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `new'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini.rb:80:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:210:in `context'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:205:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/query_cache.rb:64:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:26:in `call_app'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/static.rb:61:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:479:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:220:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
...
Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144"
Line: 1
Position: 46
Last 80 unconsumed characters:
):
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (19.8ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:47:30 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (#<RuntimeError: Illegal character '&' in raw string "email=jorgemoscat@gmail.com & password=george144">
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:154:in `block in check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `scan'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:119:in `initialize'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `new'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `parse'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `new'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini.rb:80:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:210:in `context'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:205:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/query_cache.rb:64:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:26:in `call_app'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/static.rb:61:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:479:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:220:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
...
Illegal character '&' in raw string "email=jorgemoscat@gmail.com & password=george144"
Line: 1
Position: 48
Last 80 unconsumed characters:
):
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:47:39 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (The document "email=jorgemoscat@gmail.com \npassword=george144" does not have a valid root):
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:35:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.8ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:47:51 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (The document "email=jorgemoscat@gmail.com password=george144" does not have a valid root):
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:35:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (12.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 11:48:05 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (#<RuntimeError: Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144">
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:154:in `block in check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `scan'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:119:in `initialize'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `new'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `parse'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `new'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini.rb:80:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:210:in `context'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:205:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/query_cache.rb:64:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:26:in `call_app'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/static.rb:61:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:479:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:220:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
...
Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144"
Line: 1
Position: 46
Last 80 unconsumed characters:
):
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.8ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (26.4ms)


Started POST "/api/app_login?email=%22jorgemoscat@gmail.com%22&password=[FILTERED]" for 127.0.0.1 at 2013-01-11 11:48:53 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1656791087448234097__call__3636589799154882911__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.2ms)


Started POST "/users/app_login.json" for 127.0.0.1 at 2013-01-11 11:54:52 -0800

ActionController::RoutingError (No route matches [POST] "/users/app_login.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:55:08 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__930808614787223463__call__2848970112475538297__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (132.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (149.7ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:55:39 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__930808614787223463__call__2848970112475538297__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.9ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 11:55:40 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__930808614787223463__call__2848970112475538297__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:00:44 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: invalid multibyte char (US-ASCII)
/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:40: syntax error, unexpected $end, expecting ')'
      logger.info(“Token not found.”)
                   ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.3) lib/rack/etag.rb:23:in `call'
  rack (1.4.3) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__3825277241150925539__call__2794843748760541571__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (9.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (47.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (83.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:04:16 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:04:22 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:04:23 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:04:42 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 12:05:14 -0800
Processing by Api::AppLoginController#create as HTML
Completed 406 Not Acceptable in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:05:34 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:07:20 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:07:25 -0800
Processing by Api::AppLoginController#create as JSON
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 12:10:37 -0800
Error occurred while parsing request parameters.
Contents:



REXML::ParseException (#<RuntimeError: Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144">
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:154:in `block in check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `scan'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:152:in `check'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/text.rb:119:in `initialize'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `new'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:46:in `parse'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `new'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini/rexml.rb:30:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/xml_mini.rb:80:in `parse'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/params_parser.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:210:in `context'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/session/abstract/id.rb:205:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/query_cache.rb:64:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `_run__2344260733387314511__call__2978113822440707706__callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:26:in `call_app'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/logger.rb:16:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/methodoverride.rb:21:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/runtime.rb:17:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/activesupport-3.2.2/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/lock.rb:15:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/static.rb:61:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/engine.rb:479:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/application.rb:220:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/content_length.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/railties-3.2.2/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/rack-1.4.3/lib/rack/handler/webrick.rb:59:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'
...
Illegal character '&' in raw string "email=jorgemoscat@gmail.com&password=george144"
Line: 1
Position: 46
Last 80 unconsumed characters:
):
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:95:in `rescue in parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/parsers/treeparser.rb:20:in `parse'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:231:in `build'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/rexml/document.rb:43:in `initialize'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `new'
  activesupport (3.2.2) lib/active_support/xml_mini/rexml.rb:30:in `parse'
  activesupport (3.2.2) lib/active_support/xml_mini.rb:80:in `parse'
  activesupport (3.2.2) lib/active_support/core_ext/hash/conversions.rb:90:in `from_xml'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:41:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.3) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.3) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2344260733387314511__call__2978113822440707706__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.8ms)


Started GET "/api/app_login" for 127.0.0.1 at 2013-01-11 12:12:19 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 12:12:25 -0800
Processing by Api::AppLoginController#create as HTML
Completed 406 Not Acceptable in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login?email=jorgemoscat@gmail.com&password=[FILTERED]" for 127.0.0.1 at 2013-01-11 12:12:57 -0800
Processing by Api::AppLoginController#create as HTML
  Parameters: {"email"=>"jorgemoscat@gmail.com", "password"=>"[FILTERED]"}
Completed 406 Not Acceptable in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started GET "/api/app_login?email=jorgemoscat@gmail.com&password=[FILTERED]" for 127.0.0.1 at 2013-01-11 12:13:51 -0800

ActionController::RoutingError (No route matches [GET] "/api/app_login"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started POST "/api/app_login?email=jorgemoscat@gmail.com&password=[FILTERED]" for 127.0.0.1 at 2013-01-11 12:14:23 -0800
Processing by Api::AppLoginController#create as HTML
  Parameters: {"email"=>"jorgemoscat@gmail.com", "password"=>"[FILTERED]"}
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'jorgemoscat@gmail.com' LIMIT 1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."authentication_token" = 'T2fz8kwGnydU8z5yYxBj' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35m (1.1ms)[0m  UPDATE "users" SET "authentication_token" = 'T2fz8kwGnydU8z5yYxBj', "updated_at" = '2013-01-11 20:14:23.746642' WHERE "users"."id" = 1
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
Completed 200 OK in 538ms (Views: 0.3ms | ActiveRecord: 61.3ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 12:23:22 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:52:13 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 114ms (Views: 70.3ms | ActiveRecord: 0.0ms)


Started POST "/api/app_logincurl" for 127.0.0.1 at 2013-01-11 16:54:32 -0800

ActionController::RoutingError (No route matches [POST] "/api/app_logincurl"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.3) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.3) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.3) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.3) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.3) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.6ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:54:32 -0800
Processing by Api::AppLoginController#create as */*
  Parameters: {"email"=>"jorgemoscat@gmailcom", "password"=>"[FILTERED]", "app_login"=>{"email"=>"jorgemoscat@gmailcom", "password"=>"[FILTERED]", "action"=>"create", "controller"=>"api/app_login"}}
  [1m[36mUser Load (25.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'jorgemoscat@gmailcom' LIMIT 1[0m
User jorgemoscat@gmailcom failed signin, user cannot be found.
Completed 401 Unauthorized in 322ms (Views: 0.5ms | ActiveRecord: 185.3ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:54:36 -0800
Processing by Api::AppLoginController#create as */*
  Parameters: {"{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:54:39 -0800
Processing by Api::AppLoginController#create as */*
  Parameters: {"{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:54:46 -0800
Processing by Api::AppLoginController#create as */*
  Parameters: {"{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:54:55 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:55:04 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:55:22 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:55:36 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:56:06 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:56:10 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:56:12 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login" for 127.0.0.1 at 2013-01-11 16:56:38 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:56:46 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:57:01 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {\"email\":\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:57:21 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {email:\"jorgemoscat@gmail.com\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 16:57:31 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {email:\"jorgemoscat@gmail.com\",password:\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:00:04 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {" {email:\"jorgemoscat@gmail.com\",password:\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:00:06 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"email:jorgemoscat@gmailcom"=>nil}
Completed 400 Bad Request in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:00:31 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:01:04 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"{{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:02:12 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"{{\"email\":\"jorgemoscat@gmailcom\",\"password\":\"george144\"}}"=>"[FILTERED]"}
Completed 400 Bad Request in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:02:14 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"email"=>"jorgemoscat@gmailcom", "password"=>"[FILTERED]", "app_login"=>{"email"=>"jorgemoscat@gmailcom", "password"=>"[FILTERED]", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[35mUser Load (1.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."email" = 'jorgemoscat@gmailcom' LIMIT 1
User jorgemoscat@gmailcom failed signin, user cannot be found.
Completed 401 Unauthorized in 3ms (Views: 0.2ms | ActiveRecord: 1.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-11 17:02:40 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"email"=>"jorgemoscat@gmail.com", "password"=>"[FILTERED]", "app_login"=>{"email"=>"jorgemoscat@gmail.com", "password"=>"[FILTERED]", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."email" = 'jorgemoscat@gmail.com' LIMIT 1[0m
Completed 200 OK in 101ms (Views: 0.3ms | ActiveRecord: 0.8ms)
  [1m[36m (4.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (1.0ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (8.8ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'schema_migrations'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (17.8ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations"("version" )
  [1m[36m (0.4ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (35.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "email" character varying(255) DEFAULT '' NOT NULL, "reset_password_token" character varying(255), "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "uid" character varying(255) NOT NULL, "fb_access_token" character varying(255) NOT NULL, "authentication_token" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.1ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36m (1.9ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid" ON "users"("uid" )[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130111192008')
  [1m[36m (3.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (1.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36mextensions (8.8ms)[0m  [1mselect extname from pg_extension[0m
  [1m[35mPK and serial sequence (4.9ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass

  [1m[36m (0.6ms)[0m  [1mSELECT opcname FROM pg_opclass[0m
  [1m[35m (4.6ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_uid on users (0.8ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 24987
 AND a.attnum IN (11)
[0m
  [1m[36m (5.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (0.6ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (5.1ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'schema_migrations'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (39.8ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations"("version" )
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (56.0ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "uid" character varying(255) DEFAULT '' NOT NULL, "fb_access_token" character varying(255), "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.5ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36m (55.7ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_email" ON "users"("email" )[0m
PG::Error: ERROR:  column "email" does not exist
: CREATE UNIQUE INDEX "index_users_on_email" ON "users"("email" )
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (8.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "uid" character varying(255) DEFAULT '' NOT NULL, "fb_access_token" character varying(255), "authentication_token" character varying(255), "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (4.3ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (1.8ms)[0m  CREATE UNIQUE INDEX "index_users_on_uid" ON "users"("uid" )
  [1m[36m (2.1ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35mColumns for index index_users_on_uid on users (0.7ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25020
 AND a.attnum IN (2)

  [1m[36m (1.4ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_authentication_token" ON "users"("authentication_token" )[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130111192008')
  [1m[36m (1.6ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36mextensions (0.5ms)[0m  [1mselect extname from pg_extension[0m
  [1m[35mPK and serial sequence (4.4ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass

  [1m[36m (0.7ms)[0m  [1mSELECT opcname FROM pg_opclass[0m
  [1m[35m (5.0ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_authentication_token on users (0.6ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25020
 AND a.attnum IN (4)
[0m
  [1m[35mColumns for index index_users_on_uid on users (0.4ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25020
 AND a.attnum IN (2)



Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-12 11:59:41 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHV02u9h9kadOKTJAsEQRjAXSjUiFq4YfGvhdbfgAsZCPHZBL2NA3mAKRIhAqs2i10iYq45mYLsSHJQpWpbblI6qzxXAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHV02u9h9kadOKTJAsEQRjAXSjUiFq4YfGvhdbfgAsZCPHZBL2NA3mAKRIhAqs2i10iYq45mYLsSHJQpWpbblI6qzxXAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
Completed 500 Internal Server Error in 178ms

NameError (undefined local variable or method `uid' for #<Api::AppLoginController:0x007fb37b0aff88>):
  app/controllers/api/app_login_controller.rb:14:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.8ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.6ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-12 12:01:01 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHV02u9h9kadOKTJAsEQRjAXSjUiFq4YfGvhdbfgAsZCPHZBL2NA3mAKRIhAqs2i10iYq45mYLsSHJQpWpbblI6qzxXAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHV02u9h9kadOKTJAsEQRjAXSjUiFq4YfGvhdbfgAsZCPHZBL2NA3mAKRIhAqs2i10iYq45mYLsSHJQpWpbblI6qzxXAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (27.4ms)[0m  [1mINSERT INTO "users" ("authentication_token", "created_at", "current_sign_in_at", "current_sign_in_ip", "fb_access_token", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "sign_in_count", "uid", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["authentication_token", nil], ["created_at", Sat, 12 Jan 2013 20:01:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["fb_access_token", "AAACEdEose0cBAHV02u9h9kadOKTJAsEQRjAXSjUiFq4YfGvhdbfgAsZCPHZBL2NA3mAKRIhAqs2i10iYq45mYLsSHJQpWpbblI6qzxXAZDZD"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["sign_in_count", 0], ["uid", "545887286"], ["updated_at", Sat, 12 Jan 2013 20:01:02 UTC +00:00]]
  [1m[35m (10.9ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."authentication_token" = 'jt9ZknDYu3tHqwcGx1FB' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (25.1ms)[0m  [1mUPDATE "users" SET "authentication_token" = 'jt9ZknDYu3tHqwcGx1FB', "updated_at" = '2013-01-12 20:01:02.749965' WHERE "users"."id" = 4[0m
  [1m[35m (0.4ms)[0m  COMMIT
Completed 200 OK in 1497ms (Views: 0.4ms | ActiveRecord: 81.5ms)
  [1m[36m (12.0ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
Migrating to CreateProfiles (20130114192125)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (339.7ms)[0m  [1mCREATE TABLE "profiles" ("id" serial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20130114192125')
  [1m[36m (44.0ms)[0m  [1mCOMMIT[0m
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36mextensions (28.5ms)[0m  [1mselect extname from pg_extension[0m
  [1m[35mPK and serial sequence (5.2ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"profiles"'::regclass

  [1m[36m (41.7ms)[0m  [1mSELECT opcname FROM pg_opclass[0m
  [1m[35m (33.6ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'profiles'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mPK and serial sequence (2.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass
[0m
  [1m[35m (5.6ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_authentication_token on users (0.7ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25020
 AND a.attnum IN (4)
[0m
  [1m[35mColumns for index index_users_on_uid on users (0.4ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25020
 AND a.attnum IN (2)

  [1m[36m (13.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35m (0.1ms)[0m  SET search_path TO public
  [1m[36m (0.4ms)[0m  [1mDROP DATABASE IF EXISTS "api2_test"[0m
  [1m[35m (0.1ms)[0m  SET search_path TO public
  [1m[36m (1115.8ms)[0m  [1mCREATE DATABASE "api2_test" ENCODING = 'unicode'[0m
  [1m[35m (230.6ms)[0m  CREATE TABLE "profiles" ("id" serial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (58.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "uid" character varying(255) DEFAULT '' NOT NULL, "fb_access_token" character varying(255), "authentication_token" character varying(255), "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (0.8ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (27.7ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (3.2ms)[0m  CREATE UNIQUE INDEX "index_users_on_authentication_token" ON "users"("authentication_token" )
  [1m[36m (2.1ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35mColumns for index index_users_on_authentication_token on users (1.8ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25052
 AND a.attnum IN (4)

  [1m[36m (4.3ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid" ON "users"("uid" )[0m
  [1m[35m (1.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) 
  [1m[36m (2.1ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'schema_migrations'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (2.4ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations"("version" )
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (15.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20130114192125')
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20130111192008')[0m
  [1m[36m (26.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying(255) NOT NULL) [0m
  [1m[35m (0.7ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (5.3ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'schema_migrations'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35m (22.1ms)[0m  CREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations"("version" )
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (35.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "uid" character varying(255) DEFAULT '' NOT NULL, "fb_access_token" character varying(255), "authentication_token" character varying(255), "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying(255), "last_sign_in_ip" character varying(255), "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (2.0ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36m (2.7ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_uid" ON "users"("uid" )[0m
  [1m[35m (4.8ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_uid on users (2.2ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25077
 AND a.attnum IN (2)
[0m
  [1m[35m (2.0ms)[0m  CREATE UNIQUE INDEX "index_users_on_authentication_token" ON "users"("authentication_token" )
  [1m[36m (19.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130111192008')[0m
  [1m[35m (1.0ms)[0m  COMMIT
Migrating to CreateProfiles (20130114192125)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (27.7ms)[0m  CREATE TABLE "profiles" ("id" serial primary key, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ('20130114192125')[0m
  [1m[35m (0.7ms)[0m  COMMIT
  [1m[36m (1.7ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  [1m[35mextensions (2.9ms)[0m  select extname from pg_extension
  [1m[36mPK and serial sequence (24.5ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"profiles"'::regclass
[0m
  [1m[35m (0.7ms)[0m  SELECT opcname FROM pg_opclass
  [1m[36m (4.3ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'profiles'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35mPK and serial sequence (3.0ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass

  [1m[36m (7.3ms)[0m  [1m SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname
[0m
  [1m[35mColumns for index index_users_on_authentication_token on users (0.8ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25077
 AND a.attnum IN (4)

  [1m[36mColumns for index index_users_on_uid on users (0.4ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25077
 AND a.attnum IN (2)
[0m


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-16 08:58:29 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAFQrDZB6qU7r7JBE2j1OiLhMliFKx8Sc6JiobK1xZALDPwHZCZCpJOyUuRPm66Lp8ghkeGhANV9TTaJggXrPlHDLxvzzXAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAFQrDZB6qU7r7JBE2j1OiLhMliFKx8Sc6JiobK1xZALDPwHZCZCpJOyUuRPm66Lp8ghkeGhANV9TTaJggXrPlHDLxvzzXAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (38.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 1075ms

NoMethodError (undefined method `new_profile' for Profile:Class):
  app/models/user.rb:18:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.1ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-16 09:01:18 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAFQrDZB6qU7r7JBE2j1OiLhMliFKx8Sc6JiobK1xZALDPwHZCZCpJOyUuRPm66Lp8ghkeGhANV9TTaJggXrPlHDLxvzzXAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAFQrDZB6qU7r7JBE2j1OiLhMliFKx8Sc6JiobK1xZALDPwHZCZCpJOyUuRPm66Lp8ghkeGhANV9TTaJggXrPlHDLxvzzXAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (105.7ms)[0m  [1mINSERT INTO "users" ("authentication_token", "created_at", "current_sign_in_at", "current_sign_in_ip", "fb_access_token", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "sign_in_count", "uid", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["authentication_token", nil], ["created_at", Wed, 16 Jan 2013 17:01:19 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["fb_access_token", "AAACEdEose0cBAFQrDZB6qU7r7JBE2j1OiLhMliFKx8Sc6JiobK1xZALDPwHZCZCpJOyUuRPm66Lp8ghkeGhANV9TTaJggXrPlHDLxvzzXAZDZD"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["sign_in_count", 0], ["uid", "545887286"], ["updated_at", Wed, 16 Jan 2013 17:01:19 UTC +00:00]]
  [1m[35m (19.6ms)[0m  COMMIT
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."authentication_token" = 'sjgyzbDqQLygHkuxsJ2o' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (23.6ms)[0m  [1mUPDATE "users" SET "authentication_token" = 'sjgyzbDqQLygHkuxsJ2o', "updated_at" = '2013-01-16 17:01:19.661907' WHERE "users"."id" = 1[0m
  [1m[35m (0.6ms)[0m  COMMIT
Completed 200 OK in 1180ms (Views: 0.5ms | ActiveRecord: 167.3ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-01-17 12:13:49 -0800
Served asset /rails.png - 200 OK (15ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-17 12:13:52 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (24.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 817ms

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/models/profile.rb:39: syntax error, unexpected '['
		self.friend_count = num.first.["friend_count"]
		                               ^
/Users/jorgemoscat/Dev/thanxup-api/app/models/profile.rb:39: syntax error, unexpected ']', expecting keyword_end):
  app/models/user.rb:19:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.7ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-01-17 12:17:16 -0800
Served asset /rails.png - 304 Not Modified (2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-17 12:17:23 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 583ms

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/models/profile.rb:39: syntax error, unexpected '['
		self.friend_count = num.first.["friend_count"]
		                               ^
/Users/jorgemoscat/Dev/thanxup-api/app/models/profile.rb:39: syntax error, unexpected ']', expecting keyword_end):
  app/models/user.rb:19:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.8ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-17 12:20:35 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (2.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 813ms

NoMethodError (private method `get_facebook_data' called for #<Profile:0x007fa3f49b9a20>):
  app/models/profile.rb:21:in `new_profile'
  app/models/user.rb:19:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-17 15:32:05 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 1852ms

Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, error_subcode: 463, message: Error validating access token: Session has expired at unix time 1358456400. The current unix time is 1358465527. [HTTP 400]):
  app/models/user.rb:14:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-17 15:32:50 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBANYP0VdkS4t1rOVTu283yQxf2A3a3D6NlLWrCA2QAn0iFV2FptMcJuMAahEwBxeqjvPFZBh7r6wewqmEZATaGYUbKEZCwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 1181ms

Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, error_subcode: 463, message: Error validating access token: Session has expired at unix time 1358456400. The current unix time is 1358465572. [HTTP 400]):
  app/models/user.rb:14:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-17 15:36:19 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAM6w38mJqgM7qUvJoRXaZBobRWDKZAOxaa6iJkwzAJOVnjGZBsBm4Ih6V8RQDshSf9ZBrhh0dA5YW2jwfljhOyWYU2dz1QZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAM6w38mJqgM7qUvJoRXaZBobRWDKZAOxaa6iJkwzAJOVnjGZBsBm4Ih6V8RQDshSf9ZBrhh0dA5YW2jwfljhOyWYU2dz1QZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
  [1m[35m (16.6ms)[0m  BEGIN
  [1m[36mSQL (186.3ms)[0m  [1mINSERT INTO "users" ("authentication_token", "created_at", "current_sign_in_at", "current_sign_in_ip", "fb_access_token", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "sign_in_count", "uid", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["authentication_token", nil], ["created_at", Thu, 17 Jan 2013 23:36:22 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["fb_access_token", "AAACEdEose0cBAM6w38mJqgM7qUvJoRXaZBobRWDKZAOxaa6iJkwzAJOVnjGZBsBm4Ih6V8RQDshSf9ZBrhh0dA5YW2jwfljhOyWYU2dz1QZDZD"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["sign_in_count", 0], ["uid", "545887286"], ["updated_at", Thu, 17 Jan 2013 23:36:22 UTC +00:00]]
  [1m[35m (25.5ms)[0m  COMMIT
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."authentication_token" = 'iWziPkiWyjdKcjs9ytuv' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mUPDATE "users" SET "authentication_token" = 'iWziPkiWyjdKcjs9ytuv', "updated_at" = '2013-01-17 23:36:22.713951' WHERE "users"."id" = 2[0m
  [1m[35m (0.6ms)[0m  COMMIT
Completed 200 OK in 3314ms (Views: 0.4ms | ActiveRecord: 247.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (60.2481ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :ns=>"thanxup_api_development.profiles", :key=>{:user_uid=>1}, :name=>"user_uid_1"}] flags=[] (0.2129ms)
  [1m[36m (41.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
Migrating to DeviseCreateUsers (20130111192008)
Migrating to CreateProfiles (20130114192125)
  [1m[35m (0.4ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations" 
  [1m[36mextensions (19.5ms)[0m  [1mselect extname from pg_extension[0m
  [1m[35mPK and serial sequence (105.8ms)[0m   SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"profiles"'::regclass

  [1m[36m (12.2ms)[0m  [1mSELECT opcname FROM pg_opclass[0m
  [1m[35m (21.4ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'profiles'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mPK and serial sequence (3.7ms)[0m  [1m SELECT attr.attname, seq.relname
 FROM pg_class seq,
 pg_attribute attr,
 pg_depend dep,
 pg_namespace name,
 pg_constraint cons
 WHERE seq.oid = dep.objid
 AND seq.relkind = 'S'
 AND attr.attrelid = dep.refobjid
 AND attr.attnum = dep.refobjsubid
 AND attr.attrelid = cons.conrelid
 AND attr.attnum = cons.conkey[1]
 AND cons.contype = 'p'
 AND dep.refobjid = '"users"'::regclass
[0m
  [1m[35m (2.9ms)[0m   SELECT distinct i.relname, d.indisunique, d.indkey, pg_get_indexdef(d.indexrelid), t.oid
 FROM pg_class t
 INNER JOIN pg_index d ON t.oid = d.indrelid
 INNER JOIN pg_class i ON d.indexrelid = i.oid
 WHERE i.relkind = 'i'
 AND d.indisprimary = 'f'
 AND t.relname = 'users'
 AND i.relnamespace IN (SELECT oid FROM pg_namespace WHERE nspname = ANY (current_schemas(false)) )
 ORDER BY i.relname

  [1m[36mColumns for index index_users_on_authentication_token on users (0.6ms)[0m  [1m SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25077
 AND a.attnum IN (4)
[0m
  [1m[35mColumns for index index_users_on_uid on users (0.3ms)[0m   SELECT a.attnum::text, a.attname
 FROM pg_attribute a
 WHERE a.attrelid = 25077
 AND a.attnum IN (2)

  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2321ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=profiles documents=[{"_id"=>"50fdb6fb151a4b6210000001", "user_uid"=>"asdfasdfa23fasdf3d", "name"=>"asdfasdf", "DOB"=>1989-02-05 00:00:00 UTC}] flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=profiles selector={"user_uid"=>"asdfasdfa23fasdf3d"} flags=[:slave_ok] limit=0 skip=0 fields=nil (1.7591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=profiles selector={"_id"=>"asdfasdfa23fasdf3d"} flags=[:slave_ok] limit=0 skip=0 fields=nil (0.5288ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1380ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (33.0937ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=profiles documents=[{"_id"=>"50fe02b1151a4bf6df000001", "user_uid"=>"asdfasdfasdf", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"]}] flags=[] (0.7720ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (44.1210ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-21 19:17:29 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBADrfrpRIytkGHZCS9mEsR5FmYKQt7JSn6SglbPgT2kt3ozDxHo0aocR2FCxns40R4niJOkmZCz9K4tZBw6ywtEOKCKkXAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBADrfrpRIytkGHZCS9mEsR5FmYKQt7JSn6SglbPgT2kt3ozDxHo0aocR2FCxns40R4niJOkmZCz9K4tZBw6ywtEOKCKkXAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (31.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 1107ms

NoMethodError (undefined method `key=' for #<Profile:0x007fc0256ca060>):
  app/models/profile.rb:25:in `new_profile'
  app/models/user.rb:19:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3340ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-21 19:22:00 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBADrfrpRIytkGHZCS9mEsR5FmYKQt7JSn6SglbPgT2kt3ozDxHo0aocR2FCxns40R4niJOkmZCz9K4tZBw6ywtEOKCKkXAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBADrfrpRIytkGHZCS9mEsR5FmYKQt7JSn6SglbPgT2kt3ozDxHo0aocR2FCxns40R4niJOkmZCz9K4tZBw6ywtEOKCKkXAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (1.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9561ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=profiles documents=[{"_id"=>"50fe05da151a4b0121000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBADrfrpRIytkGHZCS9mEsR5FmYKQt7JSn6SglbPgT2kt3ozDxHo0aocR2FCxns40R4niJOkmZCz9K4tZBw6ywtEOKCKkXAZDZD", "email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-02-05 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156}] flags=[] (1.0922ms)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mSQL (141.3ms)[0m  [1mINSERT INTO "users" ("authentication_token", "created_at", "current_sign_in_at", "current_sign_in_ip", "fb_access_token", "last_sign_in_at", "last_sign_in_ip", "remember_created_at", "sign_in_count", "uid", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"[0m  [["authentication_token", nil], ["created_at", Tue, 22 Jan 2013 03:22:02 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["fb_access_token", "AAACEdEose0cBADrfrpRIytkGHZCS9mEsR5FmYKQt7JSn6SglbPgT2kt3ozDxHo0aocR2FCxns40R4niJOkmZCz9K4tZBw6ywtEOKCKkXAZDZD"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["remember_created_at", nil], ["sign_in_count", 0], ["uid", "545887286"], ["updated_at", Tue, 22 Jan 2013 03:22:02 UTC +00:00]]
  [1m[35m (1.0ms)[0m  COMMIT
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."authentication_token" = 'zzpKRmCEpcx1ELiJzkJZ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mUPDATE "users" SET "authentication_token" = 'zzpKRmCEpcx1ELiJzkJZ', "updated_at" = '2013-01-22 03:22:02.353039' WHERE "users"."id" = 3[0m
  [1m[35m (0.5ms)[0m  COMMIT
Completed 200 OK in 2065ms (Views: 0.5ms | ActiveRecord: 164.1ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=profiles selector={"_id"=>"545887286"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.2332ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=profiles selector={"uid"=>"545887286"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=profiles selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (34.4031ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.3239ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0748ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (23.6411ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=profiles documents=[{"_id"=>"50fe0e3b151a4b5bae000001", "user_uid"=>"asdfasd", "updated_at"=>2013-01-22 03:59:17 UTC, "created_at"=>2013-01-22 03:59:17 UTC}] flags=[] (0.7131ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-21 22:37:00 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMAZCZBgXzq8gbRsVslqUDNZBq6evo7OVF0SLHsUZBHXcz3VLcDdQ6hOXCwkw9daaxIuRsXX81w7i2BJSIJWOZCR30BgN1QZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMAZCZBgXzq8gbRsVslqUDNZBq6evo7OVF0SLHsUZBHXcz3VLcDdQ6hOXCwkw9daaxIuRsXX81w7i2BJSIJWOZCR30BgN1QZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."uid" = '545887286' LIMIT 1[0m
Completed 500 Internal Server Error in 655ms

ActionView::MissingTemplate (Missing template api/app_login/create, application/create with {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
  * "/Users/jorgemoscat/Dev/thanxup-api/app/views"
  * "/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/devise-2.2.2/app/views"
):
  actionpack (3.2.2) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.2) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.2) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:29:in `determine_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.2) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.2) lib/active_support/callbacks.rb:403:in `_run__1731301896784913182__process_action__2720974174585621306__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__4096630403851632589__call__2882054194434854326__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6658ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2441ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 09:46:12 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `find_by_uid' for User:Class):
  app/controllers/api/app_login_controller.rb:26:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.5ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0722ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (35.6402ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1709ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fed0ae151a4bf05a000001", "user_uid"=>"123456", "updated_at"=>2013-01-22 17:47:41 UTC, "created_at"=>2013-01-22 17:47:41 UTC}] flags=[] (0.3300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"_id"=>"123456"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"_id"=>{:user_uid=>"123456"}} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (29.0623ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"_id"=>"50fed0ae151a4bf05a000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"user_uid"=>"123456"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.4060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"123456"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (25.4700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0622ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"\#{uid}"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"$where"=>"user_uid:123456"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (141.4902ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"$where"=>"user_uid:123456"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7600ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"123456"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"123456"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8571ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1063ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 09:57:01 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (57.7040ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3951ms)
Completed 500 Internal Server Error in 74ms

Mongoid::Errors::DocumentNotFound (
Problem:
  Document not found for class User with attributes {:user_uid=>"545887286"}.
Summary:
  When calling User.find_by with a hash of attributes, all attributes provided must match a document in the database or this error will be raised.
Resolution:
  Search for attributes that are in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error.):
  app/controllers/api/app_login_controller.rb:26:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2527ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 09:58:47 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (60.0059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4601ms)
Completed 500 Internal Server Error in 4076ms

NoMethodError (undefined method `uid=' for #<User:0x007fc89dd7c568>):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2867ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:00:06 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (105.6468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6211ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fed3a7151a4bce48000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "updated_at"=>2013-01-22 18:00:07 UTC, "created_at"=>2013-01-22 18:00:07 UTC}] flags=[] (0.2670ms)
Completed 500 Internal Server Error in 1008ms

NoMethodError (undefined method `fb_token' for User:Class):
  app/models/user.rb:54:in `get_facebook_data'
  app/models/user.rb:48:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0548ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:01:40 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (75.6681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4921ms)
Completed 500 Internal Server Error in 100ms

ActionView::MissingTemplate (Missing template api/app_login/create, application/create with {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
  * "/Users/jorgemoscat/Dev/thanxup-api/app/views"
  * "/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/devise-2.2.2/app/views"
):
  actionpack (3.2.2) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.2) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.2) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:29:in `determine_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.2) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.2) lib/active_support/callbacks.rb:403:in `_run__1484395996437078369__process_action__3599834884016385510__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__18810579029145900__call__577311645019519292__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:02:11 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4218ms)
Completed 500 Internal Server Error in 4ms

ActionView::MissingTemplate (Missing template api/app_login/create, application/create with {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
  * "/Users/jorgemoscat/Dev/thanxup-api/app/views"
  * "/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/devise-2.2.2/app/views"
):
  actionpack (3.2.2) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.2) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.2) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:29:in `determine_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.2) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.2) lib/active_support/callbacks.rb:403:in `_run__1484395996437078369__process_action__3599834884016385510__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__18810579029145900__call__577311645019519292__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3649ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0972ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:06:27 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (74.0948ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5238ms)
Completed 500 Internal Server Error in 106ms

ActionView::MissingTemplate (Missing template api/app_login/create, application/create with {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
  * "/Users/jorgemoscat/Dev/thanxup-api/app/views"
  * "/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/devise-2.2.2/app/views"
):
  actionpack (3.2.2) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.2) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.2) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:29:in `determine_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.2) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.2) lib/active_support/callbacks.rb:403:in `_run__4024226069199167450__process_action__206909582908118734__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2842240442707044813__call__2349420400474498036__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0829ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fed5fe151a4b903b000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "updated_at"=>2013-01-22 18:10:06 UTC, "created_at"=>2013-01-22 18:10:06 UTC}] flags=[] (0.6390ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50fed5fe151a4b903b000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 18:10:07 UTC}} flags=[] (0.9909ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (17.6501ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1268ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0860ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:14:40 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (57.8239ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3660ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fed711151a4b26d3000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "updated_at"=>2013-01-22 18:14:41 UTC, "created_at"=>2013-01-22 18:14:41 UTC}] flags=[] (0.7818ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50fed711151a4b26d3000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 18:14:44 UTC}} flags=[] (1.1380ms)
Completed 500 Internal Server Error in 3405ms

NameError (undefined local variable or method `authentication_token' for #<User:0x007fc7569d0ee8>):
  app/controllers/api/app_login_controller.rb:38:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5662ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.5329ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1748ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0571ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:18:16 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (57.7800ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3729ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fed7e9151a4bd0c6000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "updated_at"=>2013-01-22 18:18:17 UTC, "created_at"=>2013-01-22 18:18:17 UTC}] flags=[] (0.2940ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50fed7e9151a4bd0c6000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 18:18:18 UTC}} flags=[] (1.1430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"nz942fzgCmtCrF9NLoqZ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50fed7e9151a4bd0c6000001"} update={"$set"=>{"authentication_token"=>"nz942fzgCmtCrF9NLoqZ", "updated_at"=>2013-01-22 18:18:18 UTC}} flags=[] (0.1402ms)
Completed 200 OK in 1224ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (12.5649ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2228ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5431ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.4592ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5790ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:56:05 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:45: syntax error, unexpected keyword_if, expecting ')'
    if @user.nil?
      ^):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2542268959340541803__call__4361761534545377421__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (77.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (111.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1070ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:56:51 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (63.3769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4117ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fee0f5151a4b05be000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "updated_at"=>2013-01-22 18:56:53 UTC, "created_at"=>2013-01-22 18:56:53 UTC}] flags=[] (0.2489ms)
Completed 500 Internal Server Error in 1754ms

NoMethodError (undefined method `perform' for FacebookData:Class):
  app/models/user.rb:49:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3781ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.6739ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2277ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1501ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 10:58:27 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (64.5111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4508ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fee154151a4bc11c000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "updated_at"=>2013-01-22 18:58:28 UTC, "created_at"=>2013-01-22 18:58:28 UTC}] flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"ZwHs5JPTSSm4wqrhgdwC"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4971ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50fee154151a4bc11c000001"} update={"$set"=>{"authentication_token"=>"ZwHs5JPTSSm4wqrhgdwC", "updated_at"=>2013-01-22 18:58:28 UTC}} flags=[] (0.2120ms)
Completed 200 OK in 777ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (18.9390ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.4033ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (5.1169ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.3331ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1500ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1063ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fee3ea151a4b38b2000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAIKnxBTVZADH4rXRuslRCkxGEJUvKXw3owEIsZBfqyZAtFBitiM2DQWt9VTQ95rWqWTPA6hIbY2hqcMs9QNmxvJb4CgwQZDZD", "updated_at"=>2013-01-22 19:09:30 UTC, "created_at"=>2013-01-22 19:09:30 UTC}] flags=[] (0.2601ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (12.7070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7920ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7322ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50fee3ea151a4b38b2000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 19:20:04 UTC}} flags=[] (0.7601ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1189ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (24.3249ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.5590ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50fee733151a4b2c1e000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAIKnxBTVZADH4rXRuslRCkxGEJUvKXw3owEIsZBfqyZAtFBitiM2DQWt9VTQ95rWqWTPA6hIbY2hqcMs9QNmxvJb4CgwQZDZD", "updated_at"=>2013-01-22 19:23:31 UTC, "created_at"=>2013-01-22 19:23:31 UTC}] flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0910ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3239ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3139ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1361ms)


Started GET "/sidekiq" for 127.0.0.1 at 2013-01-22 13:16:22 -0800

ActionController::RoutingError (No route matches [GET] "/sidekiq"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)


Started GET "/sidekiq" for 127.0.0.1 at 2013-01-22 13:16:24 -0800

ActionController::RoutingError (No route matches [GET] "/sidekiq"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0953ms)


Started GET "/sidekiq" for 127.0.0.1 at 2013-01-22 13:17:41 -0800

ActionController::RoutingError (No route matches [GET] "/sidekiq"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/sidekiq" for 127.0.0.1 at 2013-01-22 13:17:42 -0800

ActionController::RoutingError (No route matches [GET] "/sidekiq"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/sidekiq" for 127.0.0.1 at 2013-01-22 13:17:42 -0800

ActionController::RoutingError (No route matches [GET] "/sidekiq"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/sidekiq" for 127.0.0.1 at 2013-01-22 13:17:43 -0800

ActionController::RoutingError (No route matches [GET] "/sidekiq"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2307ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (21.9300ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2197ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.8840ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.9970ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50ff0974151a4b4d4f000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAGDnvbtEt1NAiZCC4w7ZBWlwSntm5iEKL1CgRgAeFCZAXZBMQe9mYkvKNmz286tVjXhZCAcMGu2fvn2TnwlEOega3uQUkngZDZD", "updated_at"=>2013-01-22 21:49:40 UTC, "created_at"=>2013-01-22 21:49:40 UTC}] flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.9130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4869ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50ff0974151a4b4d4f000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 21:49:41 UTC}} flags=[] (1.1609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4050ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1401ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.5049ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2639ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50ff09bc151a4b5831000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAGDnvbtEt1NAiZCC4w7ZBWlwSntm5iEKL1CgRgAeFCZAXZBMQe9mYkvKNmz286tVjXhZCAcMGu2fvn2TnwlEOega3uQUkngZDZD", "updated_at"=>2013-01-22 21:50:52 UTC, "created_at"=>2013-01-22 21:50:52 UTC}] flags=[] (1.3990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5970ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50ff09bc151a4b5831000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 21:50:52 UTC}} flags=[] (1.2171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3740ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.3120ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1740ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0319ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 13:52:16 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3872ms)
Completed 500 Internal Server Error in 245ms

Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, error_subcode: 463, message: Error validating access token: Session has expired at unix time 1358881200. The current unix time is 1358891534. [HTTP 400]):
  app/models/user.rb:40:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (18.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6258ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1241ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (2.1460ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2069ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-01-22 13:53:54 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGDnvbtEt1NAiZCC4w7ZBWlwSntm5iEKL1CgRgAeFCZAXZBMQe9mYkvKNmz286tVjXhZCAcMGu2fvn2TnwlEOega3uQUkngZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGDnvbtEt1NAiZCC4w7ZBWlwSntm5iEKL1CgRgAeFCZAXZBMQe9mYkvKNmz286tVjXhZCAcMGu2fvn2TnwlEOega3uQUkngZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4742ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"50ff0a73151a4b055d000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAGDnvbtEt1NAiZCC4w7ZBWlwSntm5iEKL1CgRgAeFCZAXZBMQe9mYkvKNmz286tVjXhZCAcMGu2fvn2TnwlEOega3uQUkngZDZD", "updated_at"=>2013-01-22 21:53:55 UTC, "created_at"=>2013-01-22 21:53:55 UTC}] flags=[] (0.4401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"tKxMPAuzoqzpJU8qdp6G"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5298ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50ff0a73151a4b055d000001"} update={"$set"=>{"authentication_token"=>"tKxMPAuzoqzpJU8qdp6G", "updated_at"=>2013-01-22 21:53:55 UTC}} flags=[] (0.7429ms)
Completed 200 OK in 689ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7119ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50ff0a73151a4b055d000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>156, "updated_at"=>2013-01-22 21:53:56 UTC}} flags=[] (1.0509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0030ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3530ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1072ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2739ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.6708ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5738ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (53.1189ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0481ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1101ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.4500ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1219ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50ff0a73151a4b055d000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD", "updated_at"=>2013-01-23 18:18:36 UTC}} flags=[] (0.2711ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4289ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4740ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2929ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (6.0937ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0350ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (20.7191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5853ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (6.8231ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"50ff0a73151a4b055d000001"} update={"$set"=>{"email"=>"", "updated_at"=>2013-01-23 18:25:59 UTC}} flags=[] (0.2918ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4988ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8750ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.7610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5369ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5398ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (10.0698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2182ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5341ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.5241ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8981ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4649ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4251ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4580ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (16.3662ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6010ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0459ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.4921ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6990ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (89.2060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (14.8029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4239ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (27.8060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7899ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2400ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-03 12:53:22 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGQ79Dk4yjmTXMIDCKky5ZCh3IrvPBMcb39gi6EIJZCWZBlZCcqCKxLesAYDkGDK1dej7MJbGUC3w9N4wzqQFeBwbgmMwQZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGQ79Dk4yjmTXMIDCKky5ZCh3IrvPBMcb39gi6EIJZCWZBlZCcqCKxLesAYDkGDK1dej7MJbGUC3w9N4wzqQFeBwbgmMwQZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1048ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"510ece45151a4bad45000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAGQ79Dk4yjmTXMIDCKky5ZCh3IrvPBMcb39gi6EIJZCWZBlZCcqCKxLesAYDkGDK1dej7MJbGUC3w9N4wzqQFeBwbgmMwQZDZD", "updated_at"=>2013-02-03 20:53:25 UTC, "created_at"=>2013-02-03 20:53:25 UTC}] flags=[] (0.3359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6359ms)
Completed 500 Internal Server Error in 3012ms

ActionView::MissingTemplate (Missing template api/app_login/create, application/create with {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :slim, :coffee, :haml]}. Searched in:
  * "/Users/jorgemoscat/Dev/thanxup-api/app/views"
  * "/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/devise-2.2.2/app/views"
):
  actionpack (3.2.2) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.2) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.2) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:29:in `determine_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.2) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.2) lib/active_support/callbacks.rb:403:in `_run__142086794467290401__process_action__263049336454623576__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__874166815434857178__call__456578393087775059__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (0.8ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"510ece45151a4bad45000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-02-03 20:53:26 UTC}} flags=[] (0.8759ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2438ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (7.2269ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.5579ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6709ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1818ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-03 12:59:35 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGQ79Dk4yjmTXMIDCKky5ZCh3IrvPBMcb39gi6EIJZCWZBlZCcqCKxLesAYDkGDK1dej7MJbGUC3w9N4wzqQFeBwbgmMwQZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGQ79Dk4yjmTXMIDCKky5ZCh3IrvPBMcb39gi6EIJZCWZBlZCcqCKxLesAYDkGDK1dej7MJbGUC3w9N4wzqQFeBwbgmMwQZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (65.4080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3629ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"510ecfb8151a4b3827000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAGQ79Dk4yjmTXMIDCKky5ZCh3IrvPBMcb39gi6EIJZCWZBlZCcqCKxLesAYDkGDK1dej7MJbGUC3w9N4wzqQFeBwbgmMwQZDZD", "updated_at"=>2013-02-03 20:59:36 UTC, "created_at"=>2013-02-03 20:59:36 UTC}] flags=[] (0.2582ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"suzZDzPqQm1kgDxsSXyw"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (16.0320ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.9132ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7150ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"510ecfb8151a4b3827000001"} update={"$set"=>{"authentication_token"=>"suzZDzPqQm1kgDxsSXyw", "updated_at"=>2013-02-03 20:59:36 UTC}} flags=[] (0.2618ms)
Completed 200 OK in 1065ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"510ecfb8151a4b3827000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-02-03 20:59:37 UTC}} flags=[] (0.8690ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.0323ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3619ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2107ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9288ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0598ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (80.4920ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.4623ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.9980ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (12.2912ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (117.7483ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (98.9289ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (108.3550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (160.8372ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2288ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8550ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0223ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0853ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.2150ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1512ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7179ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0741ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:03:57 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (90.3738ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4039ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"5129750f151a4bdd34000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "updated_at"=>2013-02-24 02:03:59 UTC, "created_at"=>2013-02-24 02:03:59 UTC}] flags=[] (0.2398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"NRvwBNzqZQkni2rHsuAX"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5608ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5129750f151a4bdd34000001"} update={"$set"=>{"authentication_token"=>"NRvwBNzqZQkni2rHsuAX", "updated_at"=>2013-02-24 02:03:59 UTC}} flags=[] (0.2921ms)
Completed 200 OK in 1900ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (68.1760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4821ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5129750f151a4bdd34000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-02-24 02:04:00 UTC}} flags=[] (1.1618ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:04:10 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7739ms)
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2910ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:05:03 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (65.6881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8061ms)
Completed 200 OK in 106ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:07:37 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7727ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7539ms)
Completed 500 Internal Server Error in 227ms

ActionView::MissingTemplate (Missing template api/app_login/create, application/create with {:locale=>[:en], :formats=>[:json], :handlers=>[:erb, :builder, :slim, :coffee, :haml]}. Searched in:
  * "/Users/jorgemoscat/Dev/thanxup-api/app/views"
  * "/Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/devise-2.2.2/app/views"
):
  actionpack (3.2.2) lib/action_view/path_set.rb:58:in `find'
  actionpack (3.2.2) lib/action_view/lookup_context.rb:109:in `find'
  actionpack (3.2.2) lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:29:in `determine_template'
  actionpack (3.2.2) lib/action_view/renderer/template_renderer.rb:10:in `render'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.2) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.2) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.2) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
  activesupport (3.2.2) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.2) lib/active_support/callbacks.rb:403:in `_run__3168731575623132586__process_action__857660592928193507__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__179007901717977125__call__2431725666833114220__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/missing_template.erb within rescues/layout (1.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (6.9311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9031ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0548ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:14:25 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:47: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1261395437342216441__call__2261933461851100145__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (40.2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:14:35 -0800

SyntaxError (/Users/jorgemoscat/Dev/thanxup-api/app/controllers/api/app_login_controller.rb:47: syntax error, unexpected ')', expecting keyword_then or ';' or '\n'):
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:469:in `block in load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:639:in `new_constants_in'
  activesupport (3.2.2) lib/active_support/dependencies.rb:468:in `load_file'
  activesupport (3.2.2) lib/active_support/dependencies.rb:353:in `require_or_load'
  activesupport (3.2.2) lib/active_support/dependencies.rb:502:in `load_missing_constant'
  activesupport (3.2.2) lib/active_support/dependencies.rb:192:in `block in const_missing'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `each'
  activesupport (3.2.2) lib/active_support/dependencies.rb:190:in `const_missing'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:229:in `block in constantize'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `each'
  activesupport (3.2.2) lib/active_support/inflector/methods.rb:228:in `constantize'
  activesupport (3.2.2) lib/active_support/dependencies.rb:554:in `get'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:63:in `controller_reference'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:48:in `controller'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:26:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1261395437342216441__call__2261933461851100145__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0457ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-23 18:15:30 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMwSR5P7bv6w7CtYQqdJUjfci9ABTF5XRfO8UNWEdMgUrdza54SUlc4n3fCRyZBZBzjGaXIlAOF2H46Evj8hKbLjTZCjwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (63.9999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7780ms)
Completed 200 OK in 115ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.9401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1251ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (88.9189ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (9.2428ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (64.9731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7569ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (6.9029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6080ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (22.3851ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (20.7911ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (16.2249ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1429ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.4878ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4169ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1358ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (104.0649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3299ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5129750f151a4bdd34000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "updated_at"=>2013-02-27 03:04:09 UTC}} flags=[] (0.2961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1871ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2653ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2279ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5129750f151a4bdd34000001"} update={"$set"=>{"influence"=>0.2193675060309631, "updated_at"=>2013-02-27 03:07:39 UTC}} flags=[] (0.2348ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0827ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.1908ms)


Started GET "/courses.json?auth_token=%3Cput" for 127.0.0.1 at 2013-02-26 19:33:13 -0800

ActionController::RoutingError (No route matches [GET] "/courses.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 19:34:17 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"NRvwBNzqZQkni2rHsuAX", "profile_datum"=>{"auth_token"=>"NRvwBNzqZQkni2rHsuAX", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (67.0500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"NRvwBNzqZQkni2rHsuAX"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8361ms)
Completed 500 Internal Server Error in 187ms

NoMethodError (undefined method `current_sign_in_at' for #<User:0x007fe4365da5f8>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/trackable.rb:19:in `update_tracked_fields!'
  devise (2.2.2) lib/devise/hooks/trackable.rb:7:in `block in <top (required)>'
  warden (1.2.1) lib/warden/hooks.rb:14:in `call'
  warden (1.2.1) lib/warden/hooks.rb:14:in `block in _run_callbacks'
  warden (1.2.1) lib/warden/hooks.rb:9:in `each'
  warden (1.2.1) lib/warden/hooks.rb:9:in `_run_callbacks'
  warden (1.2.1) lib/warden/manager.rb:53:in `_run_callbacks'
  warden (1.2.1) lib/warden/proxy.rb:179:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__2454165722049687409__process_action__4000950035501765863__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__30967997616065235__call__4570276783194791329__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.5ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5380ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.6092ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2320ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 19:37:51 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.8339ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4430ms)
Completed 500 Internal Server Error in 5ms

NoMethodError (undefined method `get_object' for nil:NilClass):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (66.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (80.4ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 19:38:09 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2903ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4361ms)
Completed 500 Internal Server Error in 4ms

NoMethodError (undefined method `get_object' for nil:NilClass):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.2ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 19:38:49 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8471ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3321ms)
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `get_object' for nil:NilClass):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 19:39:07 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3300ms)
Completed 500 Internal Server Error in 3ms

NoMethodError (undefined method `get_object' for nil:NilClass):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.1ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3113ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.8038ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2422ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0700ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 19:40:45 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2572ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3791ms)
Completed 500 Internal Server Error in 4ms

NoMethodError (undefined method `get_object' for nil:NilClass):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (18.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0200ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1001ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 22:14:04 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (63.4050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3560ms)
Completed 500 Internal Server Error in 85ms

NoMethodError (undefined method `get_object' for nil:NilClass):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2231ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 22:15:08 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBABRwcZBJ0XYXj3oKNT7RATn1ZA5RNnVkTcUca1PqrUJ9Oh9aiod6ZAOFMXCuudkfcliQwuXe2bOsensy85wVRhtZA14dQgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8976ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3278ms)
Completed 500 Internal Server Error in 732ms

Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, error_subcode: 463, message: Error validating access token: Session has expired at unix time 1361941200. The current unix time is 1361945709. [HTTP 400]):
  app/models/user.rb:45:in `create_new'
  app/controllers/api/app_login_controller.rb:29:in `create'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.7ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-26 22:15:42 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGoHUgwdBbNqkOfSLLaoZADht6VBqrzJGXZBvoBou1SQRSpZAfKUR4IiM9Mg1WGD8YGyDHhP9caw1Nh67WOtMt8HzkhxgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAGoHUgwdBbNqkOfSLLaoZADht6VBqrzJGXZBvoBou1SQRSpZAfKUR4IiM9Mg1WGD8YGyDHhP9caw1Nh67WOtMt8HzkhxgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3812ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"512da48f151a4bc0cb000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAGoHUgwdBbNqkOfSLLaoZADht6VBqrzJGXZBvoBou1SQRSpZAfKUR4IiM9Mg1WGD8YGyDHhP9caw1Nh67WOtMt8HzkhxgZDZD", "updated_at"=>2013-02-27 06:15:43 UTC, "created_at"=>2013-02-27 06:15:43 UTC}] flags=[] (0.2499ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5498ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"512da48f151a4bc0cb000001"} update={"$set"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy", "updated_at"=>2013-02-27 06:15:43 UTC}} flags=[] (0.2742ms)
Completed 200 OK in 622ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0681ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7930ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7408ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0879ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8109ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:17:37 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"NRvwBNzqZQkni2rHsuAX", "profile_datum"=>{"auth_token"=>"NRvwBNzqZQkni2rHsuAX", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (61.9283ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"NRvwBNzqZQkni2rHsuAX"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3929ms)
Completed 401 Unauthorized in 77ms


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:18:10 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4990ms)
Completed 500 Internal Server Error in 4ms

NoMethodError (undefined method `current_sign_in_at' for #<User:0x007f8920ed7ca8>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/trackable.rb:19:in `update_tracked_fields!'
  devise (2.2.2) lib/devise/hooks/trackable.rb:7:in `block in <top (required)>'
  warden (1.2.1) lib/warden/hooks.rb:14:in `call'
  warden (1.2.1) lib/warden/hooks.rb:14:in `block in _run_callbacks'
  warden (1.2.1) lib/warden/hooks.rb:9:in `each'
  warden (1.2.1) lib/warden/hooks.rb:9:in `_run_callbacks'
  warden (1.2.1) lib/warden/manager.rb:53:in `_run_callbacks'
  warden (1.2.1) lib/warden/proxy.rb:179:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__4548455333264438594__process_action__1318805926274281063__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__380868309452500695__call__2702477537191167398__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (18.3ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6449ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4439ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5119ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:21:28 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (62.9120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6185ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"512da48f151a4bc0cb000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-02-27 06:21:30 UTC}} flags=[] (0.8771ms)
Completed 500 Internal Server Error in 1911ms

NoMethodError (undefined method `/' for nil:NilClass):
  app/models/user.rb:69:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:8:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.2ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (7.3581ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3292ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:23:01 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (62.6230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0040ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"512da48f151a4bc0cb000001"} update={"$set"=>{"influence"=>0.2193675060309631, "updated_at"=>2013-02-27 06:23:03 UTC}} flags=[] (0.2739ms)
Completed 500 Internal Server Error in 1918ms

NoMethodError (undefined method `model_name' for Float:Class):
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (19.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (7.7038ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1752ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0641ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:24:45 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7820ms)
Completed 500 Internal Server Error in 104ms

NoMethodError (undefined method `model_name' for Float:Class):
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0209ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2920ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:28:50 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7222ms)
Completed 500 Internal Server Error in 97ms

NoMethodError (undefined method `model_name' for Float:Class):
  app/controllers/profile_data_controller.rb:10:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (18.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9360ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0459ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:55:33 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (62.6698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7899ms)
Completed 500 Internal Server Error in 80ms

NoMethodError (undefined method `influence' for nil:NilClass):
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (17.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4322ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:56:22 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (62.0899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7560ms)
Completed 200 OK in 79ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1022ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 22:57:33 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (84.4762ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9379ms)
Completed 200 OK in 1959ms (Views: 0.5ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-26 23:01:35 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7563ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9148ms)
Completed 200 OK in 3387ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9201ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2662.1742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3601.6970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (5.5642ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0538ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5149ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5598ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8039ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1237ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-27 23:02:13 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1451ms)
Completed 500 Internal Server Error in 1113ms

Koala::Facebook::AuthenticationError (type: OAuthException, code: 190, error_subcode: 463, message: Error validating access token: Session has expired at unix time 1361952000. The current unix time is 1362034931. [HTTP 400]):
  app/models/influence.rb:5:in `basicFacebookData'
  app/models/user.rb:67:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.8ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-02-27 23:03:12 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMhLjL4HJXY3gpODMsOZBCn5RdZCx9ZBxTRD3XGyltLeWwzLvrVZAbgKbRMebQqXGpfBUx0nIqze29ZBa2BYmkBeEphByiwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAMhLjL4HJXY3gpODMsOZBCn5RdZCx9ZBxTRD3XGyltLeWwzLvrVZAbgKbRMebQqXGpfBUx0nIqze29ZBa2BYmkBeEphByiwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7341ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"512da48f151a4bc0cb000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBAMhLjL4HJXY3gpODMsOZBCn5RdZCx9ZBxTRD3XGyltLeWwzLvrVZAbgKbRMebQqXGpfBUx0nIqze29ZBa2BYmkBeEphByiwZDZD", "updated_at"=>2013-02-28 07:03:12 UTC}} flags=[] (0.2549ms)
Completed 200 OK in 166ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-02-27 23:03:24 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "profile_datum"=>{"auth_token"=>"HfJbfgbsFDjyqnKUivDy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HfJbfgbsFDjyqnKUivDy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7260ms)
Completed 200 OK in 2547ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.7271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.6847ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (20.0961ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (19.8231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (80.5779ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.2190ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1988ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9189ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4348ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4160ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0221ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:33:51 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"5133ebf2151a4b3a86000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "updated_at"=>2013-03-04 00:33:54 UTC, "created_at"=>2013-03-04 00:33:54 UTC}] flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"s7MMyxwRyMYr4Fjg7ALw"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6051ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133ebf2151a4b3a86000001"} update={"$set"=>{"authentication_token"=>"s7MMyxwRyMYr4Fjg7ALw", "updated_at"=>2013-03-04 00:33:54 UTC}} flags=[] (0.2120ms)
Completed 200 OK in 2666ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7951ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7858ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4253ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133ebf2151a4b3a86000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-03-04 00:35:19 UTC}} flags=[] (0.7350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8508ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.8107ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2627ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133ebf2151a4b3a86000001"} update={"$set"=>{"influence"=>0.2860950251203708, "updated_at"=>2013-03-04 00:36:58 UTC}} flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0631ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6301ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1292ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.6193ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.4821ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2697ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:49:44 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9363ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3657ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"5133efa9151a4b6dad000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "updated_at"=>2013-03-04 00:49:45 UTC, "created_at"=>2013-03-04 00:49:45 UTC}] flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"H3kR8xUExaTnQt4pAzdJ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5231ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133efa9151a4b6dad000001"} update={"$set"=>{"authentication_token"=>"H3kR8xUExaTnQt4pAzdJ", "updated_at"=>2013-03-04 00:49:45 UTC}} flags=[] (0.2282ms)
Completed 200 OK in 1120ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.8491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3762ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133efa9151a4b6dad000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-03-04 00:49:46 UTC}} flags=[] (1.1301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2798ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7980ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8299ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5240ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133efa9151a4b6dad000001"} update={"$set"=>{"influence"=>0.2860950251203708, "updated_at"=>2013-03-04 00:50:21 UTC}} flags=[] (0.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0340ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:51:04 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8340ms)
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:51:08 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7858ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:51:16 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8850ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8688ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.9991ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:53:15 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (17.2322ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5709ms)
Completed 200 OK in 23ms (Views: 0.2ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9820ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7768ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6782ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.1112ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0982ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1501ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-03 16:55:54 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7088ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5910ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"5133efa9151a4b6dad000001"} update={"$set"=>{"influence"=>0.2860950251203708, "updated_at"=>2013-03-04 00:55:58 UTC}} flags=[] (0.1750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>nil, "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>nil, "fb_friends"=>nil, "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>nil, "influence"=>nil, "iphone_id"=>nil, "location_id"=>nil, "location_name"=>nil, "name"=>nil, "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:33:54Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5062ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3442ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.3692ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>nil, "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>nil, "fb_friends"=>nil, "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>nil, "influence"=>nil, "iphone_id"=>nil, "location_id"=>nil, "location_name"=>nil, "name"=>nil, "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:33:54Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5388ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4671ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5490ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3235.2951ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2889.6430ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (207.0379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>nil, "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>nil, "fb_friends"=>nil, "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>nil, "influence"=>nil, "iphone_id"=>nil, "location_id"=>nil, "location_name"=>nil, "name"=>nil, "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:33:54Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3142.2849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3638.5610ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5685.6298ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.6811ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (24.2159ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1001ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3530ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1070ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0951ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"51393201151a4b2cfd000001", "updated_at"=>2013-03-08 00:35:41 UTC, "created_at"=>2013-03-08 00:35:41 UTC, "offers"=>[{"_id"=>"51393203151a4b2cfd000002"}, {"_id"=>"51393250151a4b2cfd000003", "offer_text"=>"asdfasdf"}]}] flags=[] (0.7401ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1048ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (49.7031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7999ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (1.3292ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.2110ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1122ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0879ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513936f0151a4b226d000001", "name"=>" Gossip", "updated_at"=>2013-03-08 00:55:31 UTC, "created_at"=>2013-03-08 00:55:31 UTC}] flags=[] (0.9890ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"5139373d151a4b226d000003", "offer_id"=>"12314d", "updated_at"=>2013-03-08 00:56:45 UTC, "created_at"=>2013-03-08 00:56:45 UTC}] flags=[] (0.2859ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4790ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (0.2911ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.0970ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.8502ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1221ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (64.5082ms)
  [1m[36m (8.2ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (64.6400ms)
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (96.2811ms)
  [1m[36m (0.6ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"51393a34151a4b6f06000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 01:09:08 UTC, "created_at"=>2013-03-08 01:09:08 UTC}] flags=[] (1.5130ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"51393a34151a4b6f06000002", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 01:09:08 UTC, "created_at"=>2013-03-08 01:09:08 UTC}] flags=[] (0.4280ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"51393a34151a4b6f06000003", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 01:09:08 UTC, "created_at"=>2013-03-08 01:09:08 UTC}] flags=[] (0.4008ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"51393a34151a4b6f06000004", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 01:09:08 UTC, "created_at"=>2013-03-08 01:09:08 UTC}] flags=[] (0.1631ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2529ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.9751ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.9789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.9749ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.1358ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.7741ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.4760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (5.3740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7582ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3938ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5102ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7989ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.2560ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (4.0371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.9222ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1928ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.2939ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4530ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4930ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.9913ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.0211ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2639ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (0.4280ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.1569ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (66.0417ms)
  [1m[36m (0.6ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"5139554f151a4b3892000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 03:04:47 UTC, "created_at"=>2013-03-08 03:04:47 UTC}] flags=[] (0.9341ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"5139554f151a4b3892000002", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 03:04:47 UTC, "created_at"=>2013-03-08 03:04:47 UTC}] flags=[] (0.1769ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"5139554f151a4b3892000003", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 03:04:47 UTC, "created_at"=>2013-03-08 03:04:47 UTC}] flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"5139554f151a4b3892000004", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 03:04:47 UTC, "created_at"=>2013-03-08 03:04:47 UTC}] flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8377ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6062ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4961ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3282ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9848ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3371ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2488ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6069ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7710ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4091ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7069ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.9541ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2418ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (1.2212ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (93.2598ms)
  [1m[36m (0.5ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513957a8151a4b200f000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 03:14:48 UTC, "created_at"=>2013-03-08 03:14:48 UTC}] flags=[] (1.0192ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0931ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0090ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513957a8151a4b200f000001"} update={"$push"=>{"offers"=>{"_id"=>"5139587c151a4b301a000002", "offer_text"=>"asdfasdf", "updated_at"=>2013-03-08 03:18:28 UTC, "created_at"=>2013-03-08 03:18:28 UTC}}} flags=[] (0.3152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1036.9790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5290ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513957a8151a4b200f000001"} update={"$push"=>{"offers"=>{"_id"=>"513958d3151a4b301a000003", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 03:21:39 UTC, "created_at"=>2013-03-08 03:21:39 UTC}}} flags=[] (0.2317ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5602ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4940ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.5882ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (71.8291ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.1421ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (64.8270ms)
  [1m[36m (0.4ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"5139598a151a4b672c000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 03:22:50 UTC, "created_at"=>2013-03-08 03:22:50 UTC}] flags=[] (0.6382ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$push"=>{"offers"=>{"_id"=>"5139598a151a4b672c000002", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 03:22:50 UTC, "created_at"=>2013-03-08 03:22:50 UTC}}} flags=[] (0.3200ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"5139598a151a4b672c000003", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-08 03:22:50 UTC, "created_at"=>2013-03-08 03:22:50 UTC}] flags=[] (0.2112ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000003"} update={"$push"=>{"offers"=>{"_id"=>"5139598a151a4b672c000004", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-08 03:22:50 UTC, "created_at"=>2013-03-08 03:22:50 UTC}}} flags=[] (0.1540ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.4803ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0982ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.8349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0070ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3750ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-07 19:26:49 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPK3vMJhWnXblFs8JT5dTkA1vm0PeKkhnSQx5ONiLrNZAejsXQfLPy2iMHCuDTeSufZBvAhu3KIuyYsRwBB1rwGSqvCwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPK3vMJhWnXblFs8JT5dTkA1vm0PeKkhnSQx5ONiLrNZAejsXQfLPy2iMHCuDTeSufZBvAhu3KIuyYsRwBB1rwGSqvCwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7477ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3381ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"51395a7a151a4b80d9000001", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPK3vMJhWnXblFs8JT5dTkA1vm0PeKkhnSQx5ONiLrNZAejsXQfLPy2iMHCuDTeSufZBvAhu3KIuyYsRwBB1rwGSqvCwZDZD", "updated_at"=>2013-03-08 03:26:50 UTC, "created_at"=>2013-03-08 03:26:50 UTC}] flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5352ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"51395a7a151a4b80d9000001"} update={"$set"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy", "updated_at"=>2013-03-08 03:26:50 UTC}} flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9840ms)
Completed 200 OK in 818ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5260ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6459ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4436ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4752ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3311ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-07 19:30:23 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7830ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4420ms)
Completed 500 Internal Server Error in 111ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007f93a86a0520>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__1954618764973546145__process_action__890750903418625853__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__814024023170701019__call__4922378556711790__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.7ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-07 19:30:32 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4601ms)
Completed 500 Internal Server Error in 4ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007f93a86b8b98>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__1954618764973546145__process_action__890750903418625853__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__814024023170701019__call__4922378556711790__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.6ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6189ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-07 19:31:11 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5829ms)
Completed 401 Unauthorized in 31872ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4949ms)


Started POST "/api/getvenue.json" for 127.0.0.1 at 2013-03-07 19:32:14 -0800

ActionController::RoutingError (No route matches [POST] "/api/getvenue.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-07 19:32:25 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (28.3370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5419ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8299ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"51395a7a151a4b80d9000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>158, "updated_at"=>2013-03-08 03:32:27 UTC}} flags=[] (0.9549ms)
Completed 500 Internal Server Error in 1712ms

NoMethodError (undefined method `/' for nil:NilClass):
  app/models/user.rb:69:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (19.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (7.5021ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (19.2959ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0619ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-07 23:15:45 -0800
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHGCip8auaZAsn6DJFd0EJ9qtWjwZCT6cwEKec2BWpZBSnBpGpx1izA3GDPHZAhUOf2F1fXywuEdg6vtzPW8EcdctRZApoAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHGCip8auaZAsn6DJFd0EJ9qtWjwZCT6cwEKec2BWpZBSnBpGpx1izA3GDPHZAhUOf2F1fXywuEdg6vtzPW8EcdctRZApoAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8149ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7188ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"51395a7a151a4b80d9000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBAHGCip8auaZAsn6DJFd0EJ9qtWjwZCT6cwEKec2BWpZBSnBpGpx1izA3GDPHZAhUOf2F1fXywuEdg6vtzPW8EcdctRZApoAZDZD", "updated_at"=>2013-03-08 07:15:45 UTC}} flags=[] (0.2251ms)
Completed 200 OK in 123ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-07 23:15:57 -0800
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7501ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9601ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"51395a7a151a4b80d9000001"} update={"$set"=>{"influence"=>0.2860950251203708, "updated_at"=>2013-03-08 07:15:58 UTC}} flags=[] (0.2048ms)
Completed 200 OK in 1227ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/api/getvenue.json" for 127.0.0.1 at 2013-03-07 23:16:38 -0800

ActionController::RoutingError (No route matches [POST] "/api/getvenue.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (65.0628ms)


Started POST "/api/getvenue.json" for 127.0.0.1 at 2013-03-07 23:26:42 -0800

ActionController::RoutingError (No route matches [POST] "/api/getvenue.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-07 23:26:59 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6332ms)
Completed 200 OK in 52ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-07 23:27:02 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9122ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8733ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5860ms)
Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-07 23:27:07 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.3967ms)
Completed 200 OK in 5ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-07 23:27:16 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6578ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3710ms)
Completed 401 Unauthorized in 3ms


Started GET "/getvenue.json" for 127.0.0.1 at 2013-03-07 23:29:38 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5169ms)
Completed 401 Unauthorized in 40ms


Started GET "/getvenue.json" for 127.0.0.1 at 2013-03-07 23:29:53 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkepHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkepHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8819ms)
Completed 500 Internal Server Error in 5ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007feed63b4ff8>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__4512898318081165449__process_action__124273229423189521__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__3412176829758080858__call__4316140061023173726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7668ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-08 00:11:13 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4201ms)
Completed 401 Unauthorized in 11ms


Started GET "/getvenue.json" for 127.0.0.1 at 2013-03-08 00:12:17 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1630ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5012ms)
Completed 401 Unauthorized in 4ms


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-08 00:12:27 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9369ms)
Completed 401 Unauthorized in 5ms


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-08 00:12:35 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (5.0101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3881ms)
Completed 401 Unauthorized in 8ms


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-08 00:12:45 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5159ms)
Completed 401 Unauthorized in 5ms


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-08 00:12:50 -0800
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"EGmK6BxpPxUwmpkeapHSy", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6878ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"EGmK6BxpPxUwmpkeapHSy"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3419ms)
Completed 401 Unauthorized in 3ms
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.3858ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (7.7901ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (36.3841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3680ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9968ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.0131ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.4199ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1442ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7973ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7071ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (5.1310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (17.2489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6909ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8140ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2271ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6618ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3628ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0881ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0853ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1151ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2050ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :ns=>"thanxup_api_development.profiles", :key=>{:user_uid=>1}, :name=>"user_uid_1"}] flags=[] (0.6022ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :background=>true, :ns=>"thanxup_api_development.users", :key=>{:user_uid=>1}, :name=>"user_uid_1"}] flags=[] (0.1328ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :background=>true, :ns=>"thanxup_api_development.venues", :key=>{:venue_id=>1}, :name=>"venue_id_1"}] flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5140ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1001ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.0608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2643ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6232ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"51395a7a151a4b80d9000001"} update={"$set"=>{"friend_count"=>180, "updated_at"=>2013-03-11 00:13:32 UTC}} flags=[] (0.2329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6181ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (7.6210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0812ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6909ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5368ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513e153d151a4bdff6000001", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-03-11 17:32:45 UTC, "created_at"=>2013-03-11 17:32:45 UTC}] flags=[] (0.2470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4899ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.9797ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5020ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.8358ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e1947151a4b8c3a000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-11 17:49:59 UTC, "created_at"=>2013-03-11 17:49:59 UTC}] flags=[] (0.2661ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e1a04151a4b8c3a000002", "venue_id"=>"1231", "shared"=>true, "updated_at"=>2013-03-11 17:53:08 UTC, "created_at"=>2013-03-11 17:53:08 UTC}] flags=[] (0.2880ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e1a43151a4b8c3a000003", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-11 17:54:11 UTC, "created_at"=>2013-03-11 17:54:11 UTC}] flags=[] (0.2081ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5591ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e1ab5151a4b8c3a000004", "venue_id"=>"121231", "shared"=>false, "updated_at"=>2013-03-11 17:56:05 UTC, "created_at"=>2013-03-11 17:56:05 UTC}] flags=[] (0.2170ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1191ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1342ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.5398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8010ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.1013ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0442ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e1c84151a4b151b000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-11 18:03:48 UTC, "created_at"=>2013-03-11 18:03:48 UTC}] flags=[] (0.3240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0829ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5178ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8032ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8969ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4100ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.1599ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3020ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={"_id"=>"513e153d151a4bdff6000001"} flags=[:remove_first] (0.2818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0049ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.0698ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7992ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7873ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$pull"=>{"offers"=>{"_id"=>"5139598a151a4b672c000002"}}} flags=[] (0.3219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.7818ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.2550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1981ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6382ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2770ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3938ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$set"=>{"place_id"=>"145768288146", "updated_at"=>2013-03-11 18:30:55 UTC}} flags=[] (0.3128ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.2261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5891ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e2317151a4b166f000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-11 18:31:51 UTC, "created_at"=>2013-03-11 18:31:51 UTC}] flags=[] (0.2749ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"51395a7a151a4b80d9000001"} update={"$set"=>{"fb_token"=>"AAAFGKdGbHFYBAHFzlkLBZCYJFAihJc5aiuoT2ZBePaN62WZATyF4ppzB2ibzDNSMygXaEawS2AdZBIaOs9OKIYB6WXwZAfN8jOSFgHth5uQw5QZCmkXdRq", "updated_at"=>2013-03-11 18:32:31 UTC}} flags=[] (0.2663ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.8202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.2250ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6089ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8891ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2388ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.7060ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1051ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2672ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9150ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6981ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e2423151a4be942000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-11 18:36:19 UTC, "created_at"=>2013-03-11 18:36:19 UTC}] flags=[] (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1363ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6709ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9987ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$push"=>{"offers"=>{"_id"=>"513e2501151a4bba8c000001", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-11 18:40:01 UTC, "created_at"=>2013-03-11 18:40:01 UTC}}} flags=[] (0.2789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9401ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2507ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2460ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5459ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4628ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$pullAll"=>{"offers"=>[{"_id"=>"513e2501151a4bba8c000001", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-11 18:40:01 UTC, "created_at"=>2013-03-11 18:40:01 UTC}]}} flags=[] (0.2282ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$push"=>{"offers"=>{"_id"=>"513e2647151a4bba8c000002", "offer_id"=>"asdfasdf", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "fb_post"=>"hey yo!", "updated_at"=>2013-03-11 18:45:27 UTC, "created_at"=>2013-03-11 18:45:27 UTC}}} flags=[] (0.2489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9959ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5519ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513e2852151a4bba8c000003", "user_fb_id"=>"1212131", "shared"=>true, "updated_at"=>2013-03-11 18:54:10 UTC, "created_at"=>2013-03-11 18:54:10 UTC}] flags=[] (0.3140ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"5139598a151a4b672c000001"} update={"$pullAll"=>{"venue_visits"=>[{"_id"=>"513e2852151a4bba8c000003", "user_fb_id"=>"1212131", "shared"=>true, "updated_at"=>2013-03-11 18:54:10 UTC, "created_at"=>2013-03-11 18:54:10 UTC}]}} flags=[] (0.2651ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.3798ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4983ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8359ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (22.6619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4107ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2081ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.7470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0188ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2267ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0860ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1492ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6919ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7658ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.0631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7088ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.0011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5829ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1778ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9832ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6239ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (79.6509ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0829ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (86.7500ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9990ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7203ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.5631ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.7621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0900ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2681ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8388ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6661ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6719ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6168ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.8881ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6609ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0738ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-11 12:13:05 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAA1cAZC3HWZCQktX9OCZApc40biHd5t5vHKNSS6hHzqGC98XcatG9x4n0TMLMn6YSllywepaRD6kHLO6oafNYrZBV5fZB5NgMA8u6WZB10", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAA1cAZC3HWZCQktX9OCZApc40biHd5t5vHKNSS6hHzqGC98XcatG9x4n0TMLMn6YSllywepaRD6kHLO6oafNYrZBV5fZB5NgMA8u6WZB10", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (27.4041ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8900ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e2cc3151a4b1b20000001", "user_uid"=>"100005420705218", "fb_token"=>"AAACEdEose0cBAA1cAZC3HWZCQktX9OCZApc40biHd5t5vHKNSS6hHzqGC98XcatG9x4n0TMLMn6YSllywepaRD6kHLO6oafNYrZBV5fZB5NgMA8u6WZB10", "updated_at"=>2013-03-11 19:13:07 UTC, "created_at"=>2013-03-11 19:13:07 UTC}] flags=[] (0.2720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9029ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5939ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513e2cc3151a4b1b20000001"} update={"$set"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4", "updated_at"=>2013-03-11 19:13:08 UTC}} flags=[] (0.2501ms)
Completed 200 OK in 1672ms (Views: 22.0ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3977ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1621ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6590ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5090ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4809ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-11 12:13:54 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4380ms)
Completed 500 Internal Server Error in 59ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007feed2c86888>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__4512898318081165449__process_action__2847710583179131270__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__3412176829758080858__call__4316140061023173726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (37.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.8ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (137.2ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-11 12:14:38 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0240ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5341ms)
Completed 500 Internal Server Error in 4ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007feed498daa8>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__4512898318081165449__process_action__2847710583179131270__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__3412176829758080858__call__4316140061023173726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (9.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.0ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-11 12:14:47 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4520ms)
Completed 500 Internal Server Error in 4ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007feed3907670>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__4512898318081165449__process_action__2847710583179131270__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__3412176829758080858__call__4316140061023173726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (23.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6280ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4621ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 12:15:10 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7348ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5927ms)
Completed 500 Internal Server Error in 164ms

NoMethodError (undefined method `[]' for nil:NilClass):
  app/models/influence.rb:8:in `basicFacebookData'
  app/models/user.rb:70:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (18.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (30.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8571ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4599ms)


Started GET "/api/checkin.json" for 127.0.0.1 at 2013-03-11 12:16:34 -0700

ActionController::RoutingError (No route matches [GET] "/api/checkin.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started POST "/api/checkin.json" for 127.0.0.1 at 2013-03-11 12:17:00 -0700

ActionController::RoutingError (No route matches [POST] "/api/checkin.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.9330ms)


Started POST "/api/checkin.json" for 127.0.0.1 at 2013-03-11 12:17:48 -0700

ActionController::RoutingError (No route matches [POST] "/api/checkin.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-11 12:18:19 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (12.7120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5190ms)
Completed 200 OK in 222ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/influence.json" for 127.0.0.1 at 2013-03-11 12:18:56 -0700

ActionController::RoutingError (No route matches [POST] "/influence.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 12:19:24 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8988ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4869ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6516ms)
Completed 500 Internal Server Error in 267ms

NoMethodError (undefined method `[]' for nil:NilClass):
  app/models/influence.rb:8:in `basicFacebookData'
  app/models/user.rb:70:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (34.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (50.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1778ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.5021ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8549ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.9099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1001ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.7748ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5159ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8928ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5660ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1590ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6110ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0791ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-11 13:05:22 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBADoDYU9YRClx4TEAw2FzWqZAeE0JWpXVZA5LZAZCH8axRZA8sUzMQUz5kVitXi8Ddiw1M3B75LeHqrDFZCYtZCFBeRiZB0GdQYUbYYPy9Oh7", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBADoDYU9YRClx4TEAw2FzWqZAeE0JWpXVZA5LZAZCH8axRZA8sUzMQUz5kVitXi8Ddiw1M3B75LeHqrDFZCYtZCFBeRiZB0GdQYUbYYPy9Oh7", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7632ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4339ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513e2cc3151a4b1b20000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBADoDYU9YRClx4TEAw2FzWqZAeE0JWpXVZA5LZAZCH8axRZA8sUzMQUz5kVitXi8Ddiw1M3B75LeHqrDFZCYtZCFBeRiZB0GdQYUbYYPy9Oh7", "updated_at"=>2013-03-11 20:05:23 UTC}} flags=[] (0.1850ms)
Completed 200 OK in 192ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 13:05:31 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6468ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513e2cc3151a4b1b20000001"} update={"$set"=>{"email"=>"jorge@thanxup.com", "name"=>"Thanxup Founder", "location_name"=>"", "location_id"=>"", "DOB"=>1980-10-06 00:00:00 UTC, "fb_friends"=>[], "friend_count"=>0, "updated_at"=>2013-03-11 20:05:32 UTC}} flags=[] (12.7110ms)
Completed 500 Internal Server Error in 1000ms

NoMethodError (undefined method `/' for nil:NilClass):
  app/models/user.rb:72:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (29.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.1ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.9140ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4072ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 13:06:14 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6599ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513e2cc3151a4b1b20000001"} update={"$set"=>{"influence"=>0.0, "updated_at"=>2013-03-11 20:06:16 UTC}} flags=[] (0.2241ms)
Completed 200 OK in 1206ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 13:06:19 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6270ms)
Completed 200 OK in 791ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 13:06:22 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5200ms)
Completed 200 OK in 3250ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/getinfluence.json" for 127.0.0.1 at 2013-03-11 13:06:27 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6802ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4411ms)
Completed 200 OK in 3929ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/getvenue.json" for 127.0.0.1 at 2013-03-11 13:06:49 -0700

ActionController::RoutingError (No route matches [POST] "/api/getvenue.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started POST "/api/getvenue.jsoncurl" for 127.0.0.1 at 2013-03-11 13:07:32 -0700
Error occurred while parsing request parameters.
Contents:



MultiJson::DecodeError (795: unexpected token at '&{"auth_token":"izyxPMnBbuDFatyKXzi4", "altitude":"12.3452", "longitude":"121312"}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.2) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__797604349169982546__call__2685732329396959005__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.8ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-11 13:07:32 -0700
Error occurred while parsing request parameters.
Contents:



MultiJson::DecodeError (795: unexpected token at '&{"auth_token":"izyxPMnBbuDFatyKXzi4", "altitude":"12.3452", "longitude":"121312"}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.2) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__797604349169982546__call__2685732329396959005__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.1ms)


Started POST "/api/getvenue.jsoncurl" for 127.0.0.1 at 2013-03-11 13:07:34 -0700
Error occurred while parsing request parameters.
Contents:



MultiJson::DecodeError (795: unexpected token at '&{"auth_token":"izyxPMnBbuDFatyKXzi4", "altitude":"12.3452", "longitude":"121312"}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.2) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__797604349169982546__call__2685732329396959005__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.1ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-11 13:07:34 -0700
Error occurred while parsing request parameters.
Contents:



MultiJson::DecodeError (795: unexpected token at '&{"auth_token":"izyxPMnBbuDFatyKXzi4", "altitude":"12.3452", "longitude":"121312"}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.2) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__797604349169982546__call__2685732329396959005__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (13.5ms)


Started POST "/api/getvenue.json" for 127.0.0.1 at 2013-03-11 13:07:59 -0700

ActionController::RoutingError (No route matches [POST] "/api/getvenue.json"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-11 13:09:21 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4690ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513e39f1151a4b0460000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-11 20:09:21 UTC, "created_at"=>2013-03-11 20:09:21 UTC}] flags=[] (0.2730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5450ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6714ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6990ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513e39f1151a4b0460000002", "venue_id"=>"121231", "user_fb_id"=>"100005420705218", "shared"=>true, "updated_at"=>2013-03-11 20:09:21 UTC, "created_at"=>2013-03-11 20:09:21 UTC}] flags=[] (0.2329ms)
Completed 200 OK in 149ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4632ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6061ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5519ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8842ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.5731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8006ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.0440ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2600ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.5262ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.1731ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.8089ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1447ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0760ms)
  [1m[36m (0.6ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513e4214151a4b325e000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-11 20:44:04 UTC, "created_at"=>2013-03-11 20:44:04 UTC}] flags=[] (0.6700ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513e4214151a4b325e000001"} update={"$push"=>{"offers"=>{"_id"=>"513e4214151a4b325e000002", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-11 20:44:04 UTC, "created_at"=>2013-03-11 20:44:04 UTC}}} flags=[] (0.2468ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513e4214151a4b325e000003", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-11 20:44:04 UTC, "created_at"=>2013-03-11 20:44:04 UTC}] flags=[] (0.2129ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513e4214151a4b325e000003"} update={"$push"=>{"offers"=>{"_id"=>"513e4214151a4b325e000004", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-11 20:44:04 UTC, "created_at"=>2013-03-11 20:44:04 UTC}}} flags=[] (0.1612ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4551ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (60.9159ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.7242ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8178ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.8177ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3910ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.8582ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9599ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.9519ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3409ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>nil, "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>nil, "fb_friends"=>nil, "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>nil, "influence"=>nil, "iphone_id"=>nil, "location_id"=>nil, "location_name"=>nil, "name"=>nil, "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:33:54Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5269ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9432ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2820ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2872ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5261ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.1870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"50fed7e9151a4bd0c6000001", "android_id"=>nil, "created_at"=>"2013-01-22T18:18:17Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1062324264", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBAAM8JrRbZA1tS5I5kzhkmw9rKAZCl0VbJzXTYyoYSHTA2DAi9ZCP5b4bPObO9d01WmZB2w78R0NyCD7vHbZAskIN637VJjAZDZD", "friend_count"=>"156", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-01-22T18:18:18Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.2010ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4354ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.6582ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6559ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.9970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1809ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.4300ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"AAACEdEose0cBAIX5sdAroZA8zXVCM7XhkTbm0Iku6Q1jcmKsQZAZASG1vstoh07kiH6HqnNQl7MZAf5xv9dcZBh5JoV4SBzTYL2To9HkAZAwZDZD"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6690ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5608ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.3681ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (3.8140ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1380ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8337ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2131ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={"_id"=>"513e4214151a4b325e000001"} flags=[:remove_first] (0.2301ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.7210ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.7718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6640ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (108.4161ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3819ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:08:46 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"izyxPMnBbuDFatyKXzi4", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"izyxPMnBbuDFatyKXzi4", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8893ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"izyxPMnBbuDFatyKXzi4"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3650ms)
Completed 401 Unauthorized in 172ms


Started POST "/getinfluence.jsoncurl" for 127.0.0.1 at 2013-03-12 10:12:12 -0700
Error occurred while parsing request parameters.
Contents:



MultiJson::DecodeError (795: unexpected token at '&{"uid":"100005420705218","fb_access_token":"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf"}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.2) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2734215791656030268__call__36133495848020726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (66.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (100.9ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:12:13 -0700
Error occurred while parsing request parameters.
Contents:



MultiJson::DecodeError (795: unexpected token at '&{"uid":"100005420705218","fb_access_token":"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf"}'):
  json (1.7.6) lib/json/common.rb:155:in `parse'
  json (1.7.6) lib/json/common.rb:155:in `parse'
  multi_json (1.5.0) lib/multi_json/adapters/json_common.rb:7:in `load'
  multi_json (1.5.0) lib/multi_json.rb:96:in `load'
  activesupport (3.2.2) lib/active_support/json/decoding.rb:12:in `decode'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:47:in `parse_formatted_parameters'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:17:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2734215791656030268__call__36133495848020726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (12.9ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:12:18 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8862ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4380ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513f6204151a4be43d000001", "user_uid"=>"100005420705218", "fb_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "updated_at"=>2013-03-12 17:12:36 UTC, "created_at"=>2013-03-12 17:12:36 UTC}] flags=[] (0.2570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6280ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$set"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt", "updated_at"=>2013-03-12 17:12:36 UTC}} flags=[] (0.2708ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1151ms)
Completed 200 OK in 17725ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4830ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:12:43 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5743ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5329ms)
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:12:45 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4392ms)
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:12:50 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9711ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5860ms)
Completed 200 OK in 5ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$set"=>{"email"=>"jorge@thanxup.com", "name"=>"Thanxup Founder", "location_name"=>"", "location_id"=>"", "DOB"=>1980-10-06 00:00:00 UTC, "fb_friends"=>[], "friend_count"=>0, "updated_at"=>2013-03-12 17:12:56 UTC}} flags=[] (0.3102ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-12 10:13:02 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0397ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5851ms)
Completed 500 Internal Server Error in 32ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007fb5c4528628>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__982735534920453600__process_action__4115067667478711007__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2734215791656030268__call__36133495848020726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.5ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-12 10:13:04 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5019ms)
Completed 500 Internal Server Error in 4ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007fb5c614ab80>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__982735534920453600__process_action__4115067667478711007__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2734215791656030268__call__36133495848020726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0409ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0652ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5991ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$set"=>{"influence"=>0.0, "updated_at"=>2013-03-12 17:13:50 UTC}} flags=[] (0.2112ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-12 10:15:30 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0221ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4708ms)
Completed 500 Internal Server Error in 6ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007fb5c2aa2f60>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__982735534920453600__process_action__4115067667478711007__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2734215791656030268__call__36133495848020726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:15:43 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.0689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6731ms)
Completed 200 OK in 74ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-12 10:15:55 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7589ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4442ms)
Completed 500 Internal Server Error in 4ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007fb5c2b49ab8>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__982735534920453600__process_action__4115067667478711007__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__2734215791656030268__call__36133495848020726__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4331ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-12 10:18:43 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5078ms)
Completed 500 Internal Server Error in 98ms

NameError (undefined local variable or method `encrypted_password' for #<User:0x007feb1c811960>):
  mongoid (3.0.18) lib/mongoid/attributes.rb:249:in `method_missing'
  devise (2.2.2) lib/devise/models/database_authenticatable.rb:103:in `authenticatable_salt'
  devise (2.2.2) lib/devise/models/authenticatable.rb:188:in `serialize_into_session'
  devise (2.2.2) lib/devise/rails/warden_compat.rb:19:in `serialize'
  warden (1.2.1) lib/warden/session_serializer.rb:27:in `store'
  warden (1.2.1) lib/warden/proxy.rb:175:in `set_user'
  warden (1.2.1) lib/warden/proxy.rb:323:in `_perform_authentication'
  warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
  devise (2.2.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
  activesupport (3.2.2) lib/active_support/callbacks.rb:418:in `_run__4255618884059669078__process_action__1170922661436698789__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.2) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.2) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.2) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.2) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.2) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.2) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.2) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.2) lib/action_dispatch/routing/route_set.rb:594:in `call'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `block in call'
  mongoid (3.0.18) lib/mongoid/unit_of_work.rb:39:in `unit_of_work'
  mongoid (3.0.18) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
  warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.1) lib/warden/manager.rb:34:in `catch'
  warden (1.2.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.4) lib/rack/etag.rb:23:in `call'
  rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.2) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `_run__1068211136311662513__call__452181880690748532__callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.2) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.4) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.4) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.4) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.4) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (16.9ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3847ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3707ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 10:26:57 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAADZBtLZBvWzQ5ztDc3kwIzW9kZAB6kFDjh69PEwZAZAdshpwlWVtdKyQJBb6NVJKPpJ13jsCL5F0UmGZC5KdJ4YvXkvnFbmciSYeXQXRf", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1079ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5400ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$set"=>{"encrypted_password"=>"", "updated_at"=>2013-03-12 17:26:57 UTC}} flags=[] (0.2191ms)
Completed 200 OK in 115ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-03-12 10:27:35 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7050ms)
Completed 200 OK in 8597ms (Views: 0.6ms | ActiveRecord: 0.0ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-12 10:29:00 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0312ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6909ms)
Completed 200 OK in 153ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:29:08 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1911ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4869ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513f65e4151a4b630b000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:29:08 UTC, "created_at"=>2013-03-12 17:29:08 UTC}] flags=[] (0.2851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8743ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513f65e4151a4b630b000002", "venue_id"=>"121231", "user_fb_id"=>"100005420705218", "shared"=>true, "updated_at"=>2013-03-12 17:29:08 UTC, "created_at"=>2013-03-12 17:29:08 UTC}] flags=[] (0.2499ms)
Completed 200 OK in 49ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3888ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (1.3161ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6441ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2162ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1399ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7892ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513f6719151a4bf683000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:34:17 UTC, "created_at"=>2013-03-12 17:34:17 UTC}] flags=[] (0.2849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3559ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6123ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3030ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513f67ff151a4bf683000002", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:38:07 UTC, "created_at"=>2013-03-12 17:38:07 UTC}] flags=[] (0.2520ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8259ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6220ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.4459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1797ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7281ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"513f6836151a4bd964000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:39:02 UTC, "created_at"=>2013-03-12 17:39:02 UTC}] flags=[] (0.4849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3530ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1170ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7092ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2488ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:41:36 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7381ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4601ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$push"=>{"visits"=>{"_id"=>"513f68d0151a4b63d8000003", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:41:36 UTC, "created_at"=>2013-03-12 17:41:36 UTC}}} flags=[] (0.3109ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9410ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5908ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7119ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513f68d0151a4b63d8000004", "venue_id"=>"121231", "user_fb_id"=>"100005420705218", "shared"=>true, "updated_at"=>2013-03-12 17:41:36 UTC, "created_at"=>2013-03-12 17:41:36 UTC}] flags=[] (0.2148ms)
Completed 200 OK in 269ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4930ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4611ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8810ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4139ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2177ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513f6937151a4b8e60000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-12 17:43:19 UTC, "created_at"=>2013-03-12 17:43:19 UTC}] flags=[] (0.2711ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513f6937151a4b8e60000001"} update={"$push"=>{"offers"=>{"_id"=>"513f693e151a4b8e60000002", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-12 17:43:30 UTC, "created_at"=>2013-03-12 17:43:30 UTC}}} flags=[] (0.3059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6298ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.6850ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.3612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6700ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1210ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$pullAll"=>{"visits"=>[{"_id"=>"513f68d0151a4b63d8000003", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:41:36 UTC, "created_at"=>2013-03-12 17:41:36 UTC}]}} flags=[] (0.2580ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2901ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.2220ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:44:47 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7679ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5081ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$push"=>{"visits"=>{"_id"=>"513f698f151a4b849b000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:44:47 UTC, "created_at"=>2013-03-12 17:44:47 UTC}}} flags=[] (0.3538ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (3.3929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5760ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6709ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513f698f151a4b849b000002", "venue_id"=>"121231", "user_fb_id"=>"100005420705218", "shared"=>true, "updated_at"=>2013-03-12 17:44:47 UTC, "created_at"=>2013-03-12 17:44:47 UTC}] flags=[] (0.2358ms)
Completed 200 OK in 252ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4431ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (13.2039ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7412ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:45:58 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.6550ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7498ms)
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:46:01 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4928ms)
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:46:02 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4900ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:46:03 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8271ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5839ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:46:04 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4721ms)
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 10:46:46 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6301ms)
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 11:00:25 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.2757ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5059ms)
Completed 200 OK in 123ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (24.4043ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (14.1172ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2051ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2848ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0731ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5651ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6118ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3950ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6799ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5.9721ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1742ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8788ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$set"=>{"DOB"=>nil, "updated_at"=>2013-03-12 19:03:01 UTC}} flags=[] (0.3009ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (73.5049ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (13.2258ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6189ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3921ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0779ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0800ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9563ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9801ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.8829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.7341ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513fbd19151a4b09c8000001", "venue_id"=>"121231", "user_fb_id"=>"402032", "shared"=>true, "updated_at"=>2013-03-12 23:41:13 UTC, "created_at"=>2013-03-12 23:41:13 UTC}] flags=[] (0.3068ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3919ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9241ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513fbd5f151a4b09c8000002", "venue_id"=>"31212", "user_fb_id"=>"paco", "shared"=>true, "updated_at"=>2013-03-12 23:42:23 UTC, "created_at"=>2013-03-12 23:42:23 UTC}] flags=[] (0.3059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0071ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1201ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1630ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.9527ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1071ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9322ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$pullAll"=>{"visits"=>[{"_id"=>"513f698f151a4b849b000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 17:44:47 UTC, "created_at"=>2013-03-12 17:44:47 UTC}]}} flags=[] (0.3400ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1120ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (59.7420ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1082ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-03-12 16:46:12 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAJZCx4z04AlUM3TC3TK07Xr9wqqJbIAANqTimpKfDnO6KXp6ArtapQMWmuM51SZCV4T1b5JT2mfuTh99efnZBTiqeagr0oZCR74Y0hGV", "app_login"=>{"uid"=>"100005420705218", "fb_access_token"=>"AAACEdEose0cBAJZCx4z04AlUM3TC3TK07Xr9wqqJbIAANqTimpKfDnO6KXp6ArtapQMWmuM51SZCV4T1b5JT2mfuTh99efnZBTiqeagr0oZCR74Y0hGV", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7789ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5031ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBAJZCx4z04AlUM3TC3TK07Xr9wqqJbIAANqTimpKfDnO6KXp6ArtapQMWmuM51SZCV4T1b5JT2mfuTh99efnZBTiqeagr0oZCR74Y0hGV", "updated_at"=>2013-03-12 23:46:12 UTC}} flags=[] (0.2320ms)
Completed 200 OK in 137ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-12 16:46:28 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5820ms)
Completed 200 OK in 137ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 16:47:03 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0440ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5960ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$push"=>{"visits"=>{"_id"=>"513fbe77151a4bc9a8000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 23:47:03 UTC, "created_at"=>2013-03-12 23:47:03 UTC}}} flags=[] (0.2539ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1022ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5901ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513f6937151a4b8e60000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"513fbe77151a4bc9a8000002", "venue_id"=>"121231", "user_fb_id"=>"100005420705218", "shared"=>true, "updated_at"=>2013-03-12 23:47:03 UTC, "created_at"=>2013-03-12 23:47:03 UTC}}} flags=[] (0.2370ms)
Completed 200 OK in 42ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1110ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2310ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9921ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.1113ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (3.9806ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.1271ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5922ms)
  [1m[36m (0.6ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations" [0m
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513fbed0151a4bf895000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-12 23:48:32 UTC, "created_at"=>2013-03-12 23:48:32 UTC}] flags=[] (0.6831ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513fbed0151a4bf895000001"} update={"$push"=>{"offers"=>{"_id"=>"513fbed0151a4bf895000002", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-12 23:48:32 UTC, "created_at"=>2013-03-12 23:48:32 UTC}}} flags=[] (0.2501ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513fbed0151a4bf895000003", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-12 23:48:32 UTC, "created_at"=>2013-03-12 23:48:32 UTC}] flags=[] (0.2103ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513fbed0151a4bf895000003"} update={"$push"=>{"offers"=>{"_id"=>"513fbed0151a4bf895000004", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-12 23:48:32 UTC, "created_at"=>2013-03-12 23:48:32 UTC}}} flags=[] (0.1700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3680ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.0378ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7720ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6783ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4120ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2270ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513fbf6a151a4b042c000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-12 23:51:11 UTC, "created_at"=>2013-03-12 23:51:11 UTC}] flags=[] (0.2449ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513fbf6a151a4b042c000001"} update={"$push"=>{"offers"=>{"_id"=>"513fbf74151a4b042c000002", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "updated_at"=>2013-03-12 23:51:20 UTC, "created_at"=>2013-03-12 23:51:20 UTC}}} flags=[] (0.2940ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.1880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6390ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.5131ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8314ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$pullAll"=>{"visits"=>[{"_id"=>"513fbe77151a4bc9a8000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 23:47:03 UTC, "created_at"=>2013-03-12 23:47:03 UTC}]}} flags=[] (0.3121ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2369ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-12 16:52:48 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7548ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4959ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5472ms)
Completed 200 OK in 127ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-03-12 16:53:03 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4559ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"513f6204151a4be43d000001"} update={"$push"=>{"visits"=>{"_id"=>"513fbfdf151a4b9080000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-03-12 23:53:03 UTC, "created_at"=>2013-03-12 23:53:03 UTC}}} flags=[] (0.2692ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4208ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6728ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"513fbf6a151a4b042c000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"513fbfdf151a4b9080000002", "venue_id"=>"121231", "user_fb_id"=>"100005420705218", "shared"=>true, "updated_at"=>2013-03-12 23:53:03 UTC, "created_at"=>2013-03-12 23:53:03 UTC}}} flags=[] (0.2279ms)
Completed 200 OK in 145ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4320ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8750ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.5682ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4470ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>nil, "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>nil, "fb_friends"=>nil, "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>nil, "influence"=>nil, "iphone_id"=>nil, "location_id"=>nil, "location_name"=>nil, "name"=>nil, "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:33:54Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6192ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2443ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4101ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3802ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0808ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"venue_id"=>"513fbf6a151a4b042c000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4389ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3759ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"venue_id"=>"513fbf6a151a4b042c000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (17.3142ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.0080ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2272ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"513fc5a9151a4b1fe0000002", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-13 00:17:47 UTC, "created_at"=>2013-03-13 00:17:47 UTC}] flags=[] (0.2379ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"513fc5b3151a4b1fe0000003", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"513fc5a9151a4b1fe0000002", "updated_at"=>2013-03-13 00:18:01 UTC, "created_at"=>2013-03-13 00:18:01 UTC}] flags=[] (0.3219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"venue_id"=>"513fc5a9151a4b1fe0000002"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7751ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.6609ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3311ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"venue_id"=>"513fc5a9151a4b1fe0000002"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6769ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7091ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}} (0.6192ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0953ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0247ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7288ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3779ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8523ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3309ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4043ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9918ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3609ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (16.7301ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (36.4892ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.3558ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"100005420705218"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9503ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1944.1102ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2161.0019ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (177.2122ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>nil, "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3875.4489ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>nil, "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>nil, "fb_friends"=>nil, "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>nil, "influence"=>nil, "iphone_id"=>nil, "location_id"=>nil, "location_name"=>nil, "name"=>nil, "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:33:54Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3874.3591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>{"DOB"=>"1989-05-02", "NN_thanxup_friends"=>nil, "_id"=>"5133ebf2151a4b3a86000001", "android_id"=>nil, "created_at"=>"2013-03-04T00:33:54Z", "email"=>"jorgemoscat@gmail.com", "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415073", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1177762821", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "fb_token"=>"AAACEdEose0cBACC1KLcZCu0i64fZCqwNsv2ZBVYX6M1YbsM93pzFbb6j3dRjJi2pzChMcLPNVeObf5ORAJ3cj1dSSWFbTyvliuZC2rlgsgZDZD", "friend_count"=>"158", "influence"=>"0.2860950251203708", "iphone_id"=>nil, "location_id"=>"116076341736200", "location_name"=>"Cincinnati, Ohio", "name"=>"Jorge Moscat", "thanxup_friends"=>nil, "updated_at"=>"2013-03-04T00:36:58Z", "user_uid"=>"545887286"}}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (5066.8364ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (27.0257ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (17.1778ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (392.2880ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1230ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3950ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-17 17:03:43 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7329ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (77.1408ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3829ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3357ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3278ms)
Completed 200 OK in 238ms (Views: 0.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2679ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1859ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-03-17 17:06:18 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"HBkVUpAF8e6yze5q3RZt", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8569ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"HBkVUpAF8e6yze5q3RZt"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4637ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7601ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4940ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4292ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"513fc5a9151a4b1fe0000002"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3922ms)
Completed 200 OK in 61ms (Views: 0.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (16.2067ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (91.8078ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1971ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8249ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2958ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6708ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6800ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4330ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (101.9359ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2587ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (27.2620ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.2332ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (119.7782ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.1290ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.9119ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0650ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0891ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-03-21 16:44:41 UTC, "created_at"=>2013-03-21 16:44:41 UTC}] flags=[] (0.6709ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"514b38f9151a4bf44c000002", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"514b38f9151a4bf44c000001", "updated_at"=>2013-03-21 16:44:41 UTC, "created_at"=>2013-03-21 16:44:41 UTC}] flags=[] (0.1779ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"514b38f9151a4bf44c000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"514b38f9151a4bf44c000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-03-21 16:44:41 UTC, "created_at"=>2013-03-21 16:44:41 UTC}}} flags=[] (0.3238ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"514b38f9151a4bf44c000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"514b38f9151a4bf44c000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-03-21 16:44:41 UTC, "created_at"=>2013-03-21 16:44:41 UTC}}} flags=[] (0.1929ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"514b38f9151a4bf44c000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"514b38f9151a4bf44c000005", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-03-21 16:44:41 UTC, "created_at"=>2013-03-21 16:44:41 UTC}}} flags=[] (0.1981ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0853ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9892ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0617ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (4.2031ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2612ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (38.7359ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0424ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0490ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5832ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{"venue_id"=>"514b38f9151a4bf44c000001"}} (0.4086ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.4870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7811ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (63.1089ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.3859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.2262ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (83.1087ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6430ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (11.6148ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.9568ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1} (1.0490ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.5171ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7570ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7937ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (2.9142ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (1.0498ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.9139ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7200ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7718ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7532ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.6330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (1.5209ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.6981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.5367ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7203ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4270ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.3979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.6340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.7391ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4809ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"_id"=>"514b38f9151a4bf44c000001", "venue_id"=>"121231"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields={"fb_page"=>1, "name"=>1} (0.5581ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (71.8327ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (372.7407ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8859ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"user_fb_id"=>"100005420705218", "used"=>false} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5288ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0769ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (14.7479ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (2.3453ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1898ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4740ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.0741ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (34.1671ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.0908ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupon_templates", :query=>{}} (0.8080ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupon_templates selector={} flags=[] (0.0739ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (80.5438ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"516a0149151a4b7216000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-14 01:07:21 UTC, "created_at"=>2013-04-14 01:07:21 UTC}] flags=[] (0.6602ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"516a0149151a4b7216000002", "offer_id"=>"asdfasdf", "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"516a0149151a4b7216000001", "updated_at"=>2013-04-14 01:07:21 UTC, "created_at"=>2013-04-14 01:07:21 UTC}] flags=[] (0.1698ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516a0149151a4b7216000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516a0149151a4b7216000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 01:07:21 UTC, "created_at"=>2013-04-14 01:07:21 UTC}}} flags=[] (0.4480ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516a0149151a4b7216000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516a0149151a4b7216000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 01:07:21 UTC, "created_at"=>2013-04-14 01:07:21 UTC}}} flags=[] (0.2990ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516a0149151a4b7216000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516a0149151a4b7216000005", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 01:07:21 UTC, "created_at"=>2013-04-14 01:07:21 UTC}}} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (81.6948ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:ns=>"thanxup_api_development.cupons", :key=>{:user_fb_id=>1}, :name=>"user_fb_id_1"}] flags=[] (0.5131ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :ns=>"thanxup_api_development.cupons", :key=>{:_id=>1}, :name=>"_id_1"}] flags=[] (0.0942ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :ns=>"thanxup_api_development.profiles", :key=>{:user_uid=>1}, :name=>"user_uid_1"}] flags=[] (0.0961ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :background=>true, :ns=>"thanxup_api_development.users", :key=>{:user_uid=>1}, :name=>"user_uid_1"}] flags=[] (0.1218ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=system.indexes documents=[{:unique=>true, :ns=>"thanxup_api_development.venues", :key=>{:venue_id=>1}, :name=>"venue_id_1"}] flags=[] (0.0989ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (21.6126ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-13 18:16:22 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBANZBVcgcV8ZAMeiDud2LKkZARNDa29TZBTbo5lNTZCKO5OgLKZCvDsVqZBCPNwoSUxNUEviYZBdqE5FZCEn7Y6gPNwGDrCNMOmRYonz0F40MRncZCT2XtylnvgD36jHg7hZAGgR5wyttPiNNDyZAMK3dDiSmmVXRLxDVFu0lyTqZAzQULXd2KLci0hEQ3Y18L0yGviwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBANZBVcgcV8ZAMeiDud2LKkZARNDa29TZBTbo5lNTZCKO5OgLKZCvDsVqZBCPNwoSUxNUEviYZBdqE5FZCEn7Y6gPNwGDrCNMOmRYonz0F40MRncZCT2XtylnvgD36jHg7hZAGgR5wyttPiNNDyZAMK3dDiSmmVXRLxDVFu0lyTqZAzQULXd2KLci0hEQ3Y18L0yGviwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (22.8331ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6998ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"516a0367151a4b5b63000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"BAACEdEose0cBANZBVcgcV8ZAMeiDud2LKkZARNDa29TZBTbo5lNTZCKO5OgLKZCvDsVqZBCPNwoSUxNUEviYZBdqE5FZCEn7Y6gPNwGDrCNMOmRYonz0F40MRncZCT2XtylnvgD36jHg7hZAGgR5wyttPiNNDyZAMK3dDiSmmVXRLxDVFu0lyTqZAzQULXd2KLci0hEQ3Y18L0yGviwZDZD", "updated_at"=>2013-04-14 01:16:23 UTC, "created_at"=>2013-04-14 01:16:23 UTC}] flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"qMESqdWapjPdzXP8S6WZ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6051ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0367151a4b5b63000001"} update={"$set"=>{"authentication_token"=>"qMESqdWapjPdzXP8S6WZ", "updated_at"=>2013-04-14 01:16:23 UTC}} flags=[] (0.3431ms)
Completed 200 OK in 934ms (Views: 0.5ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.3279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.1531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5472ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0367151a4b5b63000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>151, "updated_at"=>2013-04-14 01:16:24 UTC}} flags=[] (1.2081ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9561ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8290ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0367151a4b5b63000001"} update={"$set"=>{"influence"=>0.5338254123577051, "updated_at"=>2013-04-14 01:17:00 UTC}} flags=[] (0.2141ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-13 18:17:41 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"qMESqdWapjPdzXP8S6WZ", "profile_datum"=>{"auth_token"=>"qMESqdWapjPdzXP8S6WZ", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8976ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"qMESqdWapjPdzXP8S6WZ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9820ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0367151a4b5b63000001"} update={"$set"=>{"influence"=>0.6868609483482554, "updated_at"=>2013-04-14 01:17:42 UTC}} flags=[] (0.2270ms)
Completed 200 OK in 943ms (Views: 0.3ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-13 18:18:19 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"qMESqdWapjPdzXP8S6WZ", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"qMESqdWapjPdzXP8S6WZ", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.9689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"qMESqdWapjPdzXP8S6WZ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8268ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0367151a4b5b63000001"} update={"$push"=>{"visits"=>{"_id"=>"516a03db151a4bca0b000002", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 01:18:19 UTC, "created_at"=>2013-04-14 01:18:19 UTC}}} flags=[] (0.2160ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1919ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6919ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9620ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0037ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7510ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6812ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7131ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0149151a4b7216000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a03db151a4bca0b000003", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 01:18:19 UTC, "created_at"=>2013-04-14 01:18:19 UTC}}} flags=[] (0.2360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6180ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5579ms)
Completed 500 Internal Server Error in 146ms

ArgumentError (comparison of Float with nil failed):
  app/models/venue.rb:57:in `>'
  app/models/venue.rb:57:in `saveVisit'
  app/controllers/profile_data_controller.rb:28:in `checkin'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.7ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-13 18:18:36 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"qMESqdWapjPdzXP8S6WZ", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"qMESqdWapjPdzXP8S6WZ", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7629ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"qMESqdWapjPdzXP8S6WZ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8557ms)
Completed 200 OK in 5ms (Views: 0.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (36.0949ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.4140ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0149151a4b7216000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a0aea151a4b7eed000001", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 01:48:26 UTC, "created_at"=>2013-04-14 01:48:26 UTC}}} flags=[] (0.4230ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.6847ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8979ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0929ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.8101ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0149151a4b7216000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a0b25151a4b7eed000002", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 01:49:25 UTC, "created_at"=>2013-04-14 01:49:25 UTC}}} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.5022ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.4111ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0149151a4b7216000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3809ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2832ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.5300ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1531ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (1.6968ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2120ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (0.7160ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.0982ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupon_templates", :query=>{}} (1.0231ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupon_templates selector={} flags=[] (0.0782ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (83.0710ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"516a0c3b151a4b1b73000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-14 01:54:03 UTC, "created_at"=>2013-04-14 01:54:03 UTC}] flags=[] (0.8140ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"516a0c3b151a4b1b73000002", "offer_id"=>"asdfasdf", "influence_1"=>0.2, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"516a0c3b151a4b1b73000001", "updated_at"=>2013-04-14 01:54:03 UTC, "created_at"=>2013-04-14 01:54:03 UTC}] flags=[] (0.2701ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516a0c3b151a4b1b73000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516a0c3b151a4b1b73000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 01:54:03 UTC, "created_at"=>2013-04-14 01:54:03 UTC}}} flags=[] (0.3667ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516a0c3b151a4b1b73000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516a0c3b151a4b1b73000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 01:54:03 UTC, "created_at"=>2013-04-14 01:54:03 UTC}}} flags=[] (0.2849ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516a0c3b151a4b1b73000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516a0c3b151a4b1b73000005", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 01:54:03 UTC, "created_at"=>2013-04-14 01:54:03 UTC}}} flags=[] (0.2482ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-13 18:58:26 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBANZBVcgcV8ZAMeiDud2LKkZARNDa29TZBTbo5lNTZCKO5OgLKZCvDsVqZBCPNwoSUxNUEviYZBdqE5FZCEn7Y6gPNwGDrCNMOmRYonz0F40MRncZCT2XtylnvgD36jHg7hZAGgR5wyttPiNNDyZAMK3dDiSmmVXRLxDVFu0lyTqZAzQULXd2KLci0hEQ3Y18L0yGviwZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBANZBVcgcV8ZAMeiDud2LKkZARNDa29TZBTbo5lNTZCKO5OgLKZCvDsVqZBCPNwoSUxNUEviYZBdqE5FZCEn7Y6gPNwGDrCNMOmRYonz0F40MRncZCT2XtylnvgD36jHg7hZAGgR5wyttPiNNDyZAMK3dDiSmmVXRLxDVFu0lyTqZAzQULXd2KLci0hEQ3Y18L0yGviwZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7639ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3450ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"516a0d44151a4bd981000004", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"BAACEdEose0cBANZBVcgcV8ZAMeiDud2LKkZARNDa29TZBTbo5lNTZCKO5OgLKZCvDsVqZBCPNwoSUxNUEviYZBdqE5FZCEn7Y6gPNwGDrCNMOmRYonz0F40MRncZCT2XtylnvgD36jHg7hZAGgR5wyttPiNNDyZAMK3dDiSmmVXRLxDVFu0lyTqZAzQULXd2KLci0hEQ3Y18L0yGviwZDZD", "updated_at"=>2013-04-14 01:58:28 UTC, "created_at"=>2013-04-14 01:58:28 UTC}] flags=[] (0.2151ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6189ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$set"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry", "updated_at"=>2013-04-14 01:58:28 UTC}} flags=[] (0.2170ms)
Completed 200 OK in 1056ms (Views: 0.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.5619ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7772ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3120ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-14 01:58:28 UTC}} flags=[] (1.0021ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-13 18:58:44 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"2UeCzV7HPnATnxyiViry", "profile_datum"=>{"auth_token"=>"2UeCzV7HPnATnxyiViry", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.9458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0679ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$set"=>{"influence"=>0.6878145195622707, "updated_at"=>2013-04-14 01:58:45 UTC}} flags=[] (0.2022ms)
Completed 200 OK in 1574ms (Views: 0.3ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-13 18:58:58 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7577ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7198ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$push"=>{"visits"=>{"_id"=>"516a0d62151a4b9397000005", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 01:58:58 UTC, "created_at"=>2013-04-14 01:58:58 UTC}}} flags=[] (0.3800ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (4.7541ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5901ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8998ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6261ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6759ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0c3b151a4b1b73000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a0d62151a4b9397000006", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 01:58:58 UTC, "created_at"=>2013-04-14 01:58:58 UTC}}} flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8659ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6599ms)
Completed 500 Internal Server Error in 166ms

NameError (undefined local variable or method `influence_2' for Venue:Class):
  app/models/venue.rb:57:in `saveVisit'
  app/controllers/profile_data_controller.rb:28:in `checkin'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (35.6ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9248ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$set"=>{"influence"=>0.5345405907682165, "updated_at"=>2013-04-14 01:59:23 UTC}} flags=[] (0.1450ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1899ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0703ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1311ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (17.8740ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3273ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.8780ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8609ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$pull"=>{"visits"=>{"_id"=>"516a0d62151a4b9397000005"}}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2049ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-13 19:02:13 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7551ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8211ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$push"=>{"visits"=>{"_id"=>"516a0e25151a4b24b0000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 02:02:13 UTC, "created_at"=>2013-04-14 02:02:13 UTC}}} flags=[] (0.5791ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (84.2528ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0839ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7379ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9232ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7930ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7689ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7458ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7849ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0c3b151a4b1b73000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a0e26151a4b24b0000002", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 02:02:14 UTC, "created_at"=>2013-04-14 02:02:14 UTC}}} flags=[] (0.2420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9978ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6571ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5949ms)
Completed 500 Internal Server Error in 365ms

NoMethodError (undefined method `cupon_template' for #<Offer:0x007ff85c2e66f0>):
  app/models/venue.rb:60:in `saveVisit'
  app/controllers/profile_data_controller.rb:28:in `checkin'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (91.5ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0819ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (18.6219ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9341ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6080ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (8.0459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2802ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$pull"=>{"visits"=>{"_id"=>"516a0e25151a4b24b0000001"}}} flags=[] (0.2410ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1692ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-13 19:07:11 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8562ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8481ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$push"=>{"visits"=>{"_id"=>"516a0f4f151a4b2080000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 02:07:11 UTC, "created_at"=>2013-04-14 02:07:11 UTC}}} flags=[] (0.5302ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.5002ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8142ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9542ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8330ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (3.0172ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7870ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8261ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0c3b151a4b1b73000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a0f4f151a4b2080000002", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 02:07:11 UTC, "created_at"=>2013-04-14 02:07:11 UTC}}} flags=[] (0.2241ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.8971ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1281ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8042ms)
Completed 500 Internal Server Error in 387ms

NoMethodError (undefined method `cupon_template' for #<Offer:0x007fb19d7aea30>):
  app/models/venue.rb:60:in `saveVisit'
  app/controllers/profile_data_controller.rb:28:in `checkin'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.1ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.0330ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1141ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (7.5641ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$pull"=>{"visits"=>{"_id"=>"516a0f4f151a4b2080000001"}}} flags=[] (0.3011ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-13 19:10:36 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"2UeCzV7HPnATnxyiViry", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (14.6511ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"2UeCzV7HPnATnxyiViry"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2319ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516a0d44151a4bd981000004"} update={"$push"=>{"visits"=>{"_id"=>"516a101d151a4bf197000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 02:10:37 UTC, "created_at"=>2013-04-14 02:10:37 UTC}}} flags=[] (0.3059ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5398ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9291ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7088ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7942ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6459ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6421ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5960ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8030ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516a0c3b151a4b1b73000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516a101d151a4bf197000002", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 02:10:37 UTC, "created_at"=>2013-04-14 02:10:37 UTC}}} flags=[] (0.2468ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0607ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7260ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6068ms)
Completed 500 Internal Server Error in 450ms

NoMethodError (undefined method `cupon_from_offer' for Cupon:Class):
  app/models/venue.rb:64:in `saveVisit'
  app/controllers/profile_data_controller.rb:28:in `checkin'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (36.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7362ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1179ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7029ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0972ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2841ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9363ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6568ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4479ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3130ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9251ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7610ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2350ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9580ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516a0c3b151a4b1b73000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8049ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=cupons documents=[{"_id"=>"516ae2a8151a4bd581000001", "cupon_id"=>"48e01252c963dafb07e5630a71cac9a2bce35327cfa0b58254e9f28bfad884ee", "store_id"=>"121231", "user_fb_id"=>"545887286", "parent_cupon"=>"", "used"=>false, "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:08:56 UTC, "created_at"=>2013-04-14 17:08:56 UTC}] flags=[] (0.2792ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1373ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (0.6859ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.5929ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.2918ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.5882ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.2489ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (7.4749ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.1090ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (0.9871ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.2472ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"visits", :query=>{}} (50.0560ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venue_visits", :query=>{}} (30.6389ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (64.2309ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"516ae30d151a4baec9000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-14 17:10:37 UTC, "created_at"=>2013-04-14 17:10:37 UTC}] flags=[] (0.6599ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"516ae30d151a4baec9000002", "offer_id"=>"asdfasdf", "influence_1"=>0.2, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"516ae30d151a4baec9000001", "updated_at"=>2013-04-14 17:10:37 UTC, "created_at"=>2013-04-14 17:10:37 UTC}] flags=[] (0.1969ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516ae30d151a4baec9000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516ae30d151a4baec9000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:10:37 UTC, "created_at"=>2013-04-14 17:10:37 UTC}}} flags=[] (0.3002ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516ae30d151a4baec9000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516ae30d151a4baec9000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:10:37 UTC, "created_at"=>2013-04-14 17:10:37 UTC}}} flags=[] (0.1853ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516ae30d151a4baec9000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516ae30d151a4baec9000005", "parent_cupon"=>"", "template_id"=>"3", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:10:37 UTC, "created_at"=>2013-04-14 17:10:37 UTC}}} flags=[] (0.1669ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.9069ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-14 10:11:48 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"BAAB9AVEidO0BAASdyBebBCjSwwkP4mKqQYD9bT2i1jroeTEcGX3S1GDqGNH6ZAS6ZCG5bou54fEOjzzK5np42AYLHvDphNq2j2zwOqOBVDpEWdNSota8JCndoC7D9dSUybbFLP3QQDSGOymWGDSTFgmxJZAY8wRgc2Buh2sW5QLqtyHa5AgKAXUEekxHeeiI8l31noVuAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"BAAB9AVEidO0BAASdyBebBCjSwwkP4mKqQYD9bT2i1jroeTEcGX3S1GDqGNH6ZAS6ZCG5bou54fEOjzzK5np42AYLHvDphNq2j2zwOqOBVDpEWdNSota8JCndoC7D9dSUybbFLP3QQDSGOymWGDSTFgmxJZAY8wRgc2Buh2sW5QLqtyHa5AgKAXUEekxHeeiI8l31noVuAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8469ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.3879ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"516ae355151a4b26b7000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"BAAB9AVEidO0BAASdyBebBCjSwwkP4mKqQYD9bT2i1jroeTEcGX3S1GDqGNH6ZAS6ZCG5bou54fEOjzzK5np42AYLHvDphNq2j2zwOqOBVDpEWdNSota8JCndoC7D9dSUybbFLP3QQDSGOymWGDSTFgmxJZAY8wRgc2Buh2sW5QLqtyHa5AgKAXUEekxHeeiI8l31noVuAZDZD", "updated_at"=>2013-04-14 17:11:49 UTC, "created_at"=>2013-04-14 17:11:49 UTC}] flags=[] (0.2592ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"4Pk9JcqnTdRqyTi5TtMK"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6008ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae355151a4b26b7000001"} update={"$set"=>{"authentication_token"=>"4Pk9JcqnTdRqyTi5TtMK", "updated_at"=>2013-04-14 17:11:49 UTC}} flags=[] (0.2239ms)
Completed 200 OK in 782ms (Views: 0.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8430ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (6.0220ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5822ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae355151a4b26b7000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-14 17:11:50 UTC}} flags=[] (0.9880ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (2.0690ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1158ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8452ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 10:12:16 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "profile_datum"=>{"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7529ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"4Pk9JcqnTdRqyTi5TtMK"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7451ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9592ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae355151a4b26b7000001"} update={"$set"=>{"influence"=>0.2805300892107426, "updated_at"=>2013-04-14 17:12:19 UTC}} flags=[] (0.2558ms)
Completed 200 OK in 3284ms (Views: 0.4ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae355151a4b26b7000001"} update={"$set"=>{"influence"=>0.21039756690805692, "updated_at"=>2013-04-14 17:12:20 UTC}} flags=[] (0.1929ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-04-14 10:12:41 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0340ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"4Pk9JcqnTdRqyTi5TtMK"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8678ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.4952ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2143ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6821ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5729ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6113ms)
Completed 200 OK in 48ms (Views: 0.2ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-14 10:13:02 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"4Pk9JcqnTdRqyTi5TtMK"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8311ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae355151a4b26b7000001"} update={"$push"=>{"visits"=>{"_id"=>"516ae39e151a4b1aa4000002", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 17:13:02 UTC, "created_at"=>2013-04-14 17:13:02 UTC}}} flags=[] (0.2229ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3640ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6871ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4790ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8273ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7691ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7207ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6742ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516ae30d151a4baec9000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516ae39e151a4b1aa4000003", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 17:13:02 UTC, "created_at"=>2013-04-14 17:13:02 UTC}}} flags=[] (0.2298ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2968ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7119ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae30d151a4baec9000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6089ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=cupons documents=[{"_id"=>"516ae39f151a4b1aa4000004", "cupon_id"=>"3137adc29cd6422229f62ac0a0c1432bf63ae37c8da2261dbfa6643008f2e46d", "store_id"=>"121231", "user_fb_id"=>"545887286", "parent_cupon"=>"", "used"=>false, "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:13:03 UTC, "created_at"=>2013-04-14 17:13:03 UTC}] flags=[] (0.5059ms)
Completed 200 OK in 179ms (Views: 0.3ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0552ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2410ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0443ms)


Started POST "/getcupons.json" for 127.0.0.1 at 2013-04-14 10:17:18 -0700
Processing by ProfileDataController#getCupons as JSON
  Parameters: {"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "profile_datum"=>{"auth_token"=>"4Pk9JcqnTdRqyTi5TtMK", "controller"=>"profile_data", "action"=>"getCupons", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8321ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"4Pk9JcqnTdRqyTi5TtMK"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8059ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"user_fb_id"=>"545887286", "used"=>false} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7062ms)
Completed 200 OK in 136ms (Views: 0.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1749ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0202ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0130ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4129ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0900ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (11.8542ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (7.9219ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.1240ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (0.5121ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.1469ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4983ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.0839ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (0.4680ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"visits", :query=>{}} (1.0290ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=visits selector={} flags=[] (0.0818ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3201ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"516ae98e151a4bb002000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-14 17:38:22 UTC, "created_at"=>2013-04-14 17:38:22 UTC}] flags=[] (1.0889ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"516ae98e151a4bb002000002", "offer_id"=>"asdfasdf", "influence_1"=>0.1, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"516ae98e151a4bb002000001", "updated_at"=>2013-04-14 17:38:22 UTC, "created_at"=>2013-04-14 17:38:22 UTC}] flags=[] (0.3290ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516ae98e151a4bb002000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516ae98e151a4bb002000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:38:22 UTC, "created_at"=>2013-04-14 17:38:22 UTC}}} flags=[] (0.3648ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516ae98e151a4bb002000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516ae98e151a4bb002000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:38:22 UTC, "created_at"=>2013-04-14 17:38:22 UTC}}} flags=[] (0.2341ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516ae98e151a4bb002000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516ae98e151a4bb002000005", "parent_cupon"=>"", "template_id"=>"3", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:38:22 UTC, "created_at"=>2013-04-14 17:38:22 UTC}}} flags=[] (0.2680ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0984ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-14 10:40:00 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"BAAB9AVEidO0BAASdyBebBCjSwwkP4mKqQYD9bT2i1jroeTEcGX3S1GDqGNH6ZAS6ZCG5bou54fEOjzzK5np42AYLHvDphNq2j2zwOqOBVDpEWdNSota8JCndoC7D9dSUybbFLP3QQDSGOymWGDSTFgmxJZAY8wRgc2Buh2sW5QLqtyHa5AgKAXUEekxHeeiI8l31noVuAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"BAAB9AVEidO0BAASdyBebBCjSwwkP4mKqQYD9bT2i1jroeTEcGX3S1GDqGNH6ZAS6ZCG5bou54fEOjzzK5np42AYLHvDphNq2j2zwOqOBVDpEWdNSota8JCndoC7D9dSUybbFLP3QQDSGOymWGDSTFgmxJZAY8wRgc2Buh2sW5QLqtyHa5AgKAXUEekxHeeiI8l31noVuAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (62.6850ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4401ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"516ae9f1151a4b3669000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"BAAB9AVEidO0BAASdyBebBCjSwwkP4mKqQYD9bT2i1jroeTEcGX3S1GDqGNH6ZAS6ZCG5bou54fEOjzzK5np42AYLHvDphNq2j2zwOqOBVDpEWdNSota8JCndoC7D9dSUybbFLP3QQDSGOymWGDSTFgmxJZAY8wRgc2Buh2sW5QLqtyHa5AgKAXUEekxHeeiI8l31noVuAZDZD", "updated_at"=>2013-04-14 17:40:01 UTC, "created_at"=>2013-04-14 17:40:01 UTC}] flags=[] (0.2899ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"Jqomaqibzs1iBHN2FE3N"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5560ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae9f1151a4b3669000001"} update={"$set"=>{"authentication_token"=>"Jqomaqibzs1iBHN2FE3N", "updated_at"=>2013-04-14 17:40:01 UTC}} flags=[] (0.5047ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.5279ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8802ms)
Completed 200 OK in 844ms (Views: 0.5ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0743ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae9f1151a4b3669000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-14 17:40:01 UTC}} flags=[] (1.0369ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 10:40:14 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "profile_datum"=>{"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7448ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"Jqomaqibzs1iBHN2FE3N"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8099ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1797ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae9f1151a4b3669000001"} update={"$set"=>{"influence"=>0.2805300892107426, "updated_at"=>2013-04-14 17:40:15 UTC}} flags=[] (0.2429ms)
Completed 200 OK in 791ms (Views: 0.3ms)


Started POST "/getvenue.json" for 127.0.0.1 at 2013-04-14 10:40:26 -0700
Processing by ProfileDataController#getVenue as JSON
  Parameters: {"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "altitude"=>"12.3452", "longitude"=>"121312", "profile_datum"=>{"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "altitude"=>"12.3452", "longitude"=>"121312", "controller"=>"profile_data", "action"=>"getVenue", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7999ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"Jqomaqibzs1iBHN2FE3N"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.0917ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1010ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0478ms)
Completed 200 OK in 49ms (Views: 0.2ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-14 10:40:38 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7849ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"Jqomaqibzs1iBHN2FE3N"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7648ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.3891ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0560ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae9f1151a4b3669000001"} update={"$push"=>{"visits"=>{"_id"=>"516aea16151a4b4b77000002", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-14 17:40:38 UTC, "created_at"=>2013-04-14 17:40:38 UTC}}} flags=[] (0.2840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6342ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8540ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9050ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8810ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7360ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6499ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=venues selector={"_id"=>"516ae98e151a4bb002000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"516aea16151a4b4b77000003", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-14 17:40:38 UTC, "created_at"=>2013-04-14 17:40:38 UTC}}} flags=[] (0.2391ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9840ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=offers selector={"$query"=>{"venue_id"=>"516ae98e151a4bb002000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.6588ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=cupons documents=[{"_id"=>"516aea16151a4b4b77000004", "cupon_id"=>"85e0d03ccba38dca7129e910d8826dc1a9908a577b0643ff48c6a0df08258652", "store_id"=>"121231", "user_fb_id"=>"545887286", "parent_cupon"=>"", "used"=>false, "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:40:38 UTC, "created_at"=>2013-04-14 17:40:38 UTC}] flags=[] (0.2787ms)
Completed 200 OK in 108ms (Views: 0.4ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9491ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7339ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516ae9f1151a4b3669000001"} update={"$set"=>{"influence"=>0.21039756690805692, "updated_at"=>2013-04-14 17:40:47 UTC}} flags=[] (0.1578ms)


Started POST "/getcupons.json" for 127.0.0.1 at 2013-04-14 10:40:51 -0700
Processing by ProfileDataController#getCupons as JSON
  Parameters: {"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "profile_datum"=>{"auth_token"=>"Jqomaqibzs1iBHN2FE3N", "controller"=>"profile_data", "action"=>"getCupons", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0231ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"Jqomaqibzs1iBHN2FE3N"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9348ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=cupons selector={"user_fb_id"=>"545887286", "used"=>false} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6893ms)
Completed 200 OK in 7ms (Views: 0.2ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0962ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (0.8321ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.1161ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"users", :query=>{}} (0.2658ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=users selector={} flags=[] (0.0730ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.2477ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.0589ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"visits", :query=>{}} (0.7241ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=visits selector={} flags=[] (0.0613ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (0.2491ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.0591ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"516aedef151a4b32a7000001", "venue_id"=>"121231", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-14 17:57:03 UTC, "created_at"=>2013-04-14 17:57:03 UTC}] flags=[] (0.2668ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"516aedef151a4b32a7000002", "offer_id"=>"asdfasdf", "influence_1"=>0.1, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"516aedef151a4b32a7000001", "updated_at"=>2013-04-14 17:57:03 UTC, "created_at"=>2013-04-14 17:57:03 UTC}] flags=[] (0.2091ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516aedef151a4b32a7000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516aedef151a4b32a7000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:57:03 UTC, "created_at"=>2013-04-14 17:57:03 UTC}}} flags=[] (0.3500ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516aedef151a4b32a7000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516aedef151a4b32a7000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:57:03 UTC, "created_at"=>2013-04-14 17:57:03 UTC}}} flags=[] (0.2422ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"516aedef151a4b32a7000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"516aedef151a4b32a7000005", "parent_cupon"=>"", "template_id"=>"3", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "sharable_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "shared_count"=>0, "sharable_limit"=>5, "sharable_offer"=>"", "sharable_from"=>2013-03-21 00:00:00 UTC, "sharable_to"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-14 17:57:03 UTC, "created_at"=>2013-04-14 17:57:03 UTC}}} flags=[] (0.2069ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-14 11:40:07 -0700
Served asset /rails.png - 200 OK (36ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3072ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0290ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0960ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-14 11:44:40 -0700
Served asset /rails.png - 304 Not Modified (5ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-14 11:44:41 -0700
Served asset /rails.png - 304 Not Modified (5ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-14 11:44:42 -0700
Served asset /rails.png - 304 Not Modified (5ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-14 11:44:42 -0700
Served asset /rails.png - 304 Not Modified (6ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (69.6681ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (8.5881ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.2319ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (6.8700ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3330ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-14 21:46:43 -0700
Served asset /rails.png - 304 Not Modified (8ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-14 21:47:02 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBAPhCiC2gpSpFOr5aeORCvSuGM2CFZAX6QHPgyp8UDrEWcKYRIe3rMstaSNesj0TKhZAptrkqoFDVhl1iNBYq1nIoBFVHPBQ4SyGcTbA0kckIPFr18SDeQqaeNnP3o7yXeDJAvZC9XEfMjgjNggl3XTz5q4ZAvYRGLNErQDtXiJAbqAZAzNLxmZBNvJoxUADAZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBAPhCiC2gpSpFOr5aeORCvSuGM2CFZAX6QHPgyp8UDrEWcKYRIe3rMstaSNesj0TKhZAptrkqoFDVhl1iNBYq1nIoBFVHPBQ4SyGcTbA0kckIPFr18SDeQqaeNnP3o7yXeDJAvZC9XEfMjgjNggl3XTz5q4ZAvYRGLNErQDtXiJAbqAZAzNLxmZBNvJoxUADAZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4029ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=users documents=[{"_id"=>"516b8647151a4b009b000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"BAACEdEose0cBAPhCiC2gpSpFOr5aeORCvSuGM2CFZAX6QHPgyp8UDrEWcKYRIe3rMstaSNesj0TKhZAptrkqoFDVhl1iNBYq1nIoBFVHPBQ4SyGcTbA0kckIPFr18SDeQqaeNnP3o7yXeDJAvZC9XEfMjgjNggl3XTz5q4ZAvYRGLNErQDtXiJAbqAZAzNLxmZBNvJoxUADAZDZD", "updated_at"=>2013-04-15 04:47:03 UTC, "created_at"=>2013-04-15 04:47:03 UTC}] flags=[] (0.3293ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.5019ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516b8647151a4b009b000001"} update={"$set"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf", "updated_at"=>2013-04-15 04:47:03 UTC}} flags=[] (0.2682ms)
Completed 200 OK in 530ms (Views: 0.7ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 21:47:33 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "profile_datum"=>{"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.6608ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8521ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8759ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516b8647151a4b009b000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-15 04:47:34 UTC}} flags=[] (1.4098ms)
Completed 500 Internal Server Error in 1432ms

NoMethodError (undefined method `/' for nil:NilClass):
  app/models/user.rb:73:in `update_info_recal_influence'
  app/controllers/profile_data_controller.rb:9:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (57.9ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3092ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 21:52:30 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "profile_datum"=>{"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.3699ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2670ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516b8647151a4b009b000001"} update={"$set"=>{"influence"=>0.6878145195622707, "updated_at"=>2013-04-15 04:52:33 UTC}} flags=[] (0.4213ms)
Completed 500 Internal Server Error in 2665ms

ArgumentError (wrong number of arguments (0 for 2..3)):
  app/controllers/profile_data_controller.rb:11:in `test'
  app/controllers/profile_data_controller.rb:11:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (58.8ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (60.7152ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 21:54:30 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "profile_datum"=>{"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8190ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8650ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.0068ms)
Completed 500 Internal Server Error in 1474ms

ArgumentError (wrong number of arguments (0 for 2..3)):
  app/controllers/profile_data_controller.rb:11:in `test'
  app/controllers/profile_data_controller.rb:11:in `getInfluence'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (22.1ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (92.9759ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1389ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 21:55:46 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "profile_datum"=>{"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.7970ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.7670ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9842ms)
Completed 200 OK in 1433ms (Views: 0.4ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.0853ms)


Started GET "/getinfluence.json" for 127.0.0.1 at 2013-04-14 21:56:48 -0700
Processing by ProfileDataController#getInfluence as JSON
  Parameters: {"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "profile_datum"=>{"auth_token"=>"PzXrybCsXnUT4yi4kCYf", "controller"=>"profile_data", "action"=>"getInfluence", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"authentication_token"=>"PzXrybCsXnUT4yi4kCYf"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1052ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1759ms)
Completed 200 OK in 1462ms (Views: 0.7ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3421ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 18:30:55 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHVCWahqE4Q9AHZCMZBLtYXerDE8Wb9hz3ZBfZA79LmZAxsSWgfs1nAUsFyi2wBZBfP5LfnoUcDFh897zphZBedsabLFZBfXUQZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAHVCWahqE4Q9AHZCMZBLtYXerDE8Wb9hz3ZBfZA79LmZAxsSWgfs1nAUsFyi2wBZBfP5LfnoUcDFh897zphZBedsabLFZBfXUQZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1429ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=users selector={"_id"=>"516b8647151a4b009b000001"} update={"$set"=>{"fb_token"=>"AAACEdEose0cBAHVCWahqE4Q9AHZCMZBLtYXerDE8Wb9hz3ZBfZA79LmZAxsSWgfs1nAUsFyi2wBZBfP5LfnoUcDFh897zphZBedsabLFZBfXUQZDZD", "updated_at"=>2013-04-16 01:30:56 UTC}} flags=[] (0.2964ms)
Completed 200 OK in 91ms (Views: 0.6ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-15 18:34:10 -0700
Served asset /rails.png - 304 Not Modified (32ms)


Started GET "/assets/rails.png" for 127.0.0.1 at 2013-04-15 18:34:11 -0700
Served asset /rails.png - 304 Not Modified (0ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.3077ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (451.5581ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:07:15 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.1011ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516cce74151a4b88c1000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "updated_at"=>2013-04-16 04:07:16 UTC, "created_at"=>2013-04-16 04:07:16 UTC}] flags=[] (0.4117ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"Ud3ufvHpxjgLiRxMRzup"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (204.8478ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516cce74151a4b88c1000001"} update={"$set"=>{"authentication_token"=>"Ud3ufvHpxjgLiRxMRzup", "updated_at"=>2013-04-16 04:07:16 UTC}} flags=[] (0.3040ms)
Completed 200 OK in 1488ms (Views: 0.6ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (388.2399ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:11:08 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.5248ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516ccf5d151a4b7e72000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "updated_at"=>2013-04-16 04:11:09 UTC, "created_at"=>2013-04-16 04:11:09 UTC}] flags=[] (0.3750ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"FbneKCz6ojEYtpYYwbkN"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (189.3229ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516ccf5d151a4b7e72000001"} update={"$set"=>{"authentication_token"=>"FbneKCz6ojEYtpYYwbkN", "updated_at"=>2013-04-16 04:11:10 UTC}} flags=[] (0.3667ms)
Completed 200 OK in 1349ms (Views: 0.7ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:11:51 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.7441ms)
Completed 200 OK in 194ms (Views: 0.3ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:11:53 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (182.0040ms)
Completed 200 OK in 184ms (Views: 0.2ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (421.9110ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:18:24 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (193.2678ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516cd112151a4bdf13000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "updated_at"=>2013-04-16 04:18:26 UTC, "created_at"=>2013-04-16 04:18:26 UTC}] flags=[] (0.3829ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"xcKzRDqwVbh6SNkpq7gJ"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.3260ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516cd112151a4bdf13000001"} update={"$set"=>{"authentication_token"=>"xcKzRDqwVbh6SNkpq7gJ", "updated_at"=>2013-04-16 04:18:26 UTC}} flags=[] (0.3572ms)
Completed 200 OK in 1820ms (Views: 0.7ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (384.8531ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:22:45 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.1870ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516cd216151a4b20a5000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "updated_at"=>2013-04-16 04:22:46 UTC, "created_at"=>2013-04-16 04:22:46 UTC}] flags=[] (0.3660ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"7yyx9qUxFxkZq4tusDU1"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.4719ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516cd216151a4b20a5000001"} update={"$set"=>{"authentication_token"=>"7yyx9qUxFxkZq4tusDU1", "updated_at"=>2013-04-16 04:22:47 UTC}} flags=[] (0.4160ms)
Completed 200 OK in 1443ms (Views: 0.8ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (379.5500ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (373.9579ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-15 21:29:09 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.8240ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516cd397151a4b618d000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAG3bCp02nZCfnfuyQ6lwdl2AOlVwhgGXDsJ4iEAE6axjWuhhc25gnYwCAqh5TFmx6bMUT4ZC0I7wQbRdyNdooE7gMmowZDZD", "updated_at"=>2013-04-16 04:29:11 UTC, "created_at"=>2013-04-16 04:29:11 UTC}] flags=[] (0.4642ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"xDu4xphGZcy1ZxkDQQtV"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (204.1631ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516cd397151a4b618d000001"} update={"$set"=>{"authentication_token"=>"xDu4xphGZcy1ZxkDQQtV", "updated_at"=>2013-04-16 04:29:11 UTC}} flags=[] (0.3560ms)
Completed 200 OK in 1814ms (Views: 0.7ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (386.4977ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (376.7500ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (380.5921ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (432.3330ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (376.2281ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (377.7730ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (383.9591ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (183.7819ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.7799ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.6660ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.3610ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.9891ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (198.9191ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (345.9010ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:36:10 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (334.0759ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (180.1090ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516d9a1c5fb9dacff7000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "updated_at"=>2013-04-16 18:36:12 UTC, "created_at"=>2013-04-16 18:36:12 UTC}] flags=[] (0.2980ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"ATThcqTPSVGaPSp6uLHH"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (176.5361ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9a1c5fb9dacff7000001"} update={"$set"=>{"authentication_token"=>"ATThcqTPSVGaPSp6uLHH", "updated_at"=>2013-04-16 18:36:12 UTC}} flags=[] (0.2930ms)
Completed 200 OK in 1716ms (Views: 0.5ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:38:11 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (355.2692ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (175.4282ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516d9a955fb9da7fc7000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "updated_at"=>2013-04-16 18:38:13 UTC, "created_at"=>2013-04-16 18:38:13 UTC}] flags=[] (0.3641ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"KGYKM8fqUCx5Q3qVFypa"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (169.3199ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9a955fb9da7fc7000001"} update={"$set"=>{"authentication_token"=>"KGYKM8fqUCx5Q3qVFypa", "updated_at"=>2013-04-16 18:38:13 UTC}} flags=[] (0.2489ms)
Completed 200 OK in 1712ms (Views: 0.4ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:43:14 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (360.2290ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (179.7378ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516d9bc45fb9da1a77000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "updated_at"=>2013-04-16 18:43:16 UTC, "created_at"=>2013-04-16 18:43:16 UTC}] flags=[] (0.3078ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"tLPzJrEg4sS4iWyP5kny"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (167.9339ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9bc45fb9da1a77000001"} update={"$set"=>{"authentication_token"=>"tLPzJrEg4sS4iWyP5kny", "updated_at"=>2013-04-16 18:43:16 UTC}} flags=[] (0.2680ms)
Completed 200 OK in 2018ms (Views: 0.4ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:46:49 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (355.7310ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (175.1728ms)
Completed 200 OK in 2281ms (Views: 0.4ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:47:17 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (169.5940ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516d9cb65fb9da569a000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "updated_at"=>2013-04-16 18:47:18 UTC, "created_at"=>2013-04-16 18:47:18 UTC}] flags=[] (0.3281ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"o8tEF63GY6CRyE9KdDFP"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (879.0390ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9cb65fb9da569a000001"} update={"$set"=>{"authentication_token"=>"o8tEF63GY6CRyE9KdDFP", "updated_at"=>2013-04-16 18:47:19 UTC}} flags=[] (0.2632ms)
Completed 200 OK in 1539ms (Views: 0.3ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (341.5370ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (361.5420ms)


Started POST "/api/app_login.jsonl" for 127.0.0.1 at 2013-04-16 11:51:10 -0700
Processing by Api::AppLoginController#create as 
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"jsonl"}}
Completed 406 Not Acceptable in 1ms (Views: 0.4ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:51:18 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (358.1169ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (170.9487ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516d9da75fb9dab775000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "updated_at"=>2013-04-16 18:51:19 UTC, "created_at"=>2013-04-16 18:51:19 UTC}] flags=[] (0.2987ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"ozA6QuvD5PUT6ut4DFNx"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (167.8421ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9da75fb9dab775000001"} update={"$set"=>{"authentication_token"=>"ozA6QuvD5PUT6ut4DFNx", "updated_at"=>2013-04-16 18:51:20 UTC}} flags=[] (0.2670ms)
Completed 200 OK in 2417ms (Views: 0.3ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (349.0970ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (169.2600ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (165.9949ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9da75fb9dab775000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-16 18:51:22 UTC}} flags=[] (1.0350ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (366.9469ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:53:40 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (1395.8170ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (181.4690ms)
Completed 200 OK in 2070ms (Views: 0.6ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-16 11:54:26 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (172.2901ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=users documents=[{"_id"=>"516d9e635fb9da5f4a000001", "encrypted_password"=>"", "user_uid"=>"545887286", "fb_token"=>"AAACEdEose0cBAPqU7pdUQLRZCf6fevYgSgctxgZAqb7zoTif0M5CHIEDbL8QzNd9e932gESZBGzS0UOk6abTtt4badkS20PjY6qiy7WrgZDZD", "updated_at"=>2013-04-16 18:54:27 UTC, "created_at"=>2013-04-16 18:54:27 UTC}] flags=[] (0.2842ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"pEsAKXUNnaa8qspcFxt8"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (173.2402ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9e635fb9da5f4a000001"} update={"$set"=>{"authentication_token"=>"pEsAKXUNnaa8qspcFxt8", "updated_at"=>2013-04-16 18:54:27 UTC}} flags=[] (0.2921ms)
Completed 200 OK in 1511ms (Views: 0.4ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (409.6520ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (170.7590ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (176.7950ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9e635fb9da5f4a000001"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-16 18:54:29 UTC}} flags=[] (1.6429ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (345.2229ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (177.8502ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.7067ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516d9e635fb9da5f4a000001"} update={"$set"=>{"influence"=>0.26301763720053106, "updated_at"=>2013-04-16 18:54:57 UTC}} flags=[] (0.2170ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (332.9611ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=thanxup-prod command={:count=>"cupons", :query=>{}} (166.4622ms)
  MOPED: 54.228.8.237:59957 DELETE       database=thanxup-prod collection=cupons selector={} flags=[] (0.2162ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=thanxup-prod command={:count=>"venue_visits", :query=>{}} (167.8879ms)
  MOPED: 54.228.8.237:59957 DELETE       database=thanxup-prod collection=venue_visits selector={} flags=[] (0.1471ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=thanxup-prod command={:count=>"venues", :query=>{}} (168.3178ms)
  MOPED: 54.228.8.237:59957 DELETE       database=thanxup-prod collection=venues selector={} flags=[] (0.1421ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=thanxup-prod command={:count=>"visits", :query=>{}} (168.6022ms)
  MOPED: 54.228.8.237:59957 DELETE       database=thanxup-prod collection=visits selector={} flags=[] (0.1707ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=thanxup-prod command={:count=>"offers", :query=>{}} (166.1878ms)
  MOPED: 54.228.8.237:59957 DELETE       database=thanxup-prod collection=offers selector={} flags=[] (0.1719ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=venues documents=[{"_id"=>"51707e66151a4baa59000001", "venue_id"=>"121231", "kind"=>"Copas", "image_link"=>"https://dl.dropboxusercontent.com/u/155213031/PACO.jpeg", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-18 23:14:46 UTC, "created_at"=>2013-04-18 23:14:46 UTC}] flags=[] (0.3819ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=offers documents=[{"_id"=>"51707e66151a4baa59000002", "offer_id"=>"asdfasdf", "influence_1"=>0.1, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"51707e66151a4baa59000001", "updated_at"=>2013-04-18 23:14:46 UTC, "created_at"=>2013-04-18 23:14:46 UTC}] flags=[] (0.2787ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=offers selector={"_id"=>"51707e66151a4baa59000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51707e66151a4baa59000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-18 23:14:46 UTC, "created_at"=>2013-04-18 23:14:46 UTC}}} flags=[] (0.4280ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=offers selector={"_id"=>"51707e66151a4baa59000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51707e66151a4baa59000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-18 23:14:46 UTC, "created_at"=>2013-04-18 23:14:46 UTC}}} flags=[] (0.2339ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=offers selector={"_id"=>"51707e66151a4baa59000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51707e66151a4baa59000005", "parent_cupon"=>"", "template_id"=>"3", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-18 23:14:46 UTC, "created_at"=>2013-04-18 23:14:46 UTC}}} flags=[] (0.2120ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (334.0831ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (973.7830ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (165.6861ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (170.7180ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (168.5598ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (381.9668ms)


Started GET "/venue/121231" for 127.0.0.1 at 2013-04-18 16:30:33 -0700
Processing by VenueController#show as HTML
  Parameters: {"id"=>"121231"}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (359.0252ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>nil}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (169.7028ms)
Completed 500 Internal Server Error in 871ms

NoMethodError (undefined method `image_link' for nil:NilClass):
  app/controllers/venue_controller.rb:3:in `show'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (64.9ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (113.4ms)


Started GET "/venue/121231" for 127.0.0.1 at 2013-04-18 16:31:05 -0700
Processing by VenueController#show as HTML
  Parameters: {"id"=>"121231"}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (349.9272ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>nil}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (173.6171ms)
Completed 500 Internal Server Error in 872ms

NoMethodError (undefined method `image_link' for nil:NilClass):
  app/controllers/venue_controller.rb:3:in `show'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (15.1ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (342.6790ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (168.5100ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (173.5628ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (390.0862ms)


Started GET "/venue/121231" for 127.0.0.1 at 2013-04-18 16:32:50 -0700
Processing by VenueController#show as HTML
  Parameters: {"id"=>"121231"}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (336.6301ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>nil}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (167.7160ms)
Completed 500 Internal Server Error in 842ms

NoMethodError (undefined method `image_link' for nil:NilClass):
  app/controllers/venue_controller.rb:3:in `show'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (67.4ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (87.4ms)


Started GET "/venue" for 127.0.0.1 at 2013-04-18 16:33:05 -0700

ActionController::RoutingError (No route matches [GET] "/venue"):
  actionpack (3.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.2) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.2) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.2) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.2) lib/action_dispatch/middleware/static.rb:61:in `call'
  railties (3.2.2) lib/rails/engine.rb:479:in `call'
  railties (3.2.2) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.2) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /Users/jorgemoscat/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/venue/12" for 127.0.0.1 at 2013-04-18 16:33:09 -0700
Processing by VenueController#show as HTML
  Parameters: {"id"=>"12"}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>nil}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (176.1169ms)
Completed 500 Internal Server Error in 177ms

NoMethodError (undefined method `image_link' for nil:NilClass):
  app/controllers/venue_controller.rb:3:in `show'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.0ms)


Started GET "/venue/121231" for 127.0.0.1 at 2013-04-18 16:33:13 -0700
Processing by VenueController#show as HTML
  Parameters: {"id"=>"121231"}
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>nil}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (171.3262ms)
Completed 500 Internal Server Error in 173ms

NoMethodError (undefined method `image_link' for nil:NilClass):
  app/controllers/venue_controller.rb:3:in `show'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (14.0ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (394.8088ms)


Started GET "/venue/121231" for 127.0.0.1 at 2013-04-18 16:33:33 -0700
Processing by VenueController#show as HTML
  Parameters: {"id"=>"121231"}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (339.2460ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (170.5253ms)
Redirected to https://dl.dropboxusercontent.com/u/155213031/PACO.jpeg
Completed 302 Found in 851ms
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (372.7348ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (375.7451ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (430.9759ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (386.7002ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (373.9128ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (374.4299ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (374.7101ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (373.5821ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516dc9317f5ca1925b00000b"} update={"$pullAll"=>{"visits"=>[{"_id"=>"517173fa7f5ca1ccab000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-19 16:42:34 UTC, "created_at"=>2013-04-19 16:42:34 UTC}, {"_id"=>"5172ca497f5ca1ccab000002", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-20 17:03:05 UTC, "created_at"=>2013-04-20 17:03:05 UTC}]}} flags=[] (0.3419ms)


Started POST "/api/app_login.json" for 127.0.0.1 at 2013-04-20 17:25:13 -0700
Processing by Api::AppLoginController#create as JSON
  Parameters: {"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBAAOFLT46fWqvgLNugSnjM6ZCBC1ftDPfHAZCfKdFLJvCdsujYSYJZCzugfGX7zGe6rXkAJol4veajfyefwZAc2kZBsl6GxCqUwzVB8Se2TPX95UWCdwLZCCjiHyQEKIWM6QHYBXfergtB6ZCzg4RgzNhqOahprPu90dhOdL5Fjtzu8tkdgQtmxLoQmyjJ5zmgZDZD", "app_login"=>{"uid"=>"545887286", "fb_access_token"=>"BAACEdEose0cBAAOFLT46fWqvgLNugSnjM6ZCBC1ftDPfHAZCfKdFLJvCdsujYSYJZCzugfGX7zGe6rXkAJol4veajfyefwZAc2kZBsl6GxCqUwzVB8Se2TPX95UWCdwLZCCjiHyQEKIWM6QHYBXfergtB6ZCzg4RgzNhqOahprPu90dhOdL5Fjtzu8tkdgQtmxLoQmyjJ5zmgZDZD", "action"=>"create", "controller"=>"api/app_login", "format"=>"json"}}
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (380.8689ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (191.3121ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516dc9317f5ca1925b00000b"} update={"$set"=>{"fb_token"=>"BAACEdEose0cBAAOFLT46fWqvgLNugSnjM6ZCBC1ftDPfHAZCfKdFLJvCdsujYSYJZCzugfGX7zGe6rXkAJol4veajfyefwZAc2kZBsl6GxCqUwzVB8Se2TPX95UWCdwLZCCjiHyQEKIWM6QHYBXfergtB6ZCzg4RgzNhqOahprPu90dhOdL5Fjtzu8tkdgQtmxLoQmyjJ5zmgZDZD", "updated_at"=>2013-04-21 00:25:14 UTC}} flags=[] (0.2682ms)
Completed 200 OK in 1090ms (Views: 0.4ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-20 17:25:45 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"DK24WDsTpxim69fyHaBU", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"DK24WDsTpxim69fyHaBU", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (374.0332ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"DK24WDsTpxim69fyHaBU"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.5777ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"516dc9317f5ca1925b00000b"} update={"$push"=>{"visits"=>{"_id"=>"5173320b151a4b7466000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-21 00:25:47 UTC, "created_at"=>2013-04-21 00:25:47 UTC}}} flags=[] (0.3610ms)
Completed 500 Internal Server Error in 1748ms

NoMethodError (undefined method `perform_async' for VenueVisit:Class):
  app/controllers/profile_data_controller.rb:28:in `checkin'


  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (73.7ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.5ms)
  Rendered /Users/jorgemoscat/.rvm/gems/ruby-1.9.3-p0/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (124.5ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (456.3673ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.9468ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (188.0958ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.6602ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.8462ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-20 17:25:51 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"DK24WDsTpxim69fyHaBU", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"DK24WDsTpxim69fyHaBU", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (367.9049ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"DK24WDsTpxim69fyHaBU"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.1098ms)
Completed 200 OK in 934ms (Views: 0.3ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (379.3700ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (373.5342ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (380.4600ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (188.5059ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (183.8791ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"5173337f151a4bd94d000001", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-21 00:31:59 UTC, "created_at"=>2013-04-21 00:31:59 UTC}}} flags=[] (0.4098ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (206.1920ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (185.3311ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (369.8099ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (371.9120ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (379.1392ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"1220884986"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (185.8649ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.4280ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.8496ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (185.6182ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (407.6729ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (360.9269ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (441.6411ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (370.0919ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (194.3910ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"51758011151a4b1183000001", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:23:13 UTC, "created_at"=>2013-04-22 18:23:13 UTC}}} flags=[] (0.3090ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.8724ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.7080ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (364.9409ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (184.8991ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (182.0557ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"517580407f5ca13cd3000003"} update={"$set"=>{"email"=>"jorgemoscat@gmail.com", "name"=>"Jorge Moscat", "location_name"=>"Cincinnati, Ohio", "location_id"=>"116076341736200", "DOB"=>1989-05-02 00:00:00 UTC, "fb_friends"=>["817420", "1109775", "3602113", "7720990", "9337723", "15503086", "17602364", "21201432", "21413309", "21413613", "21415245", "21423012", "21426263", "28705619", "61901639", "143800818", "206300752", "502051033", "516759238", "523527037", "532773996", "535948161", "543196352", "544742593", "555716145", "559723961", "560754342", "563006806", "569077131", "575929975", "577200618", "582649322", "583823051", "592468842", "596304529", "611561618", "616177189", "618905248", "620228020", "620558612", "621436358", "640051116", "643026874", "649704248", "663722823", "677534001", "686767653", "692055948", "693045269", "695542678", "696733943", "698276309", "701867902", "708226785", "725616592", "730350506", "732411258", "733516247", "743820551", "747956793", "750323361", "755370541", "762949759", "774010614", "776567508", "784600300", "797050857", "826529828", "845305047", "851105522", "882380645", "1004275352", "1015397277", "1023144137", "1040622659", "1042452262", "1062324264", "1062556692", "1084687824", "1096855124", "1104607127", "1109873396", "1145461624", "1146267422", "1165742981", "1190463046", "1192849273", "1194774134", "1197975483", "1202340027", "1220512044", "1220884986", "1229640089", "1243155323", "1245456149", "1248733349", "1251186165", "1259935372", "1261920102", "1339586712", "1348831619", "1355032877", "1383669818", "1385178405", "1388786537", "1413960307", "1414410199", "1414440822", "1418970423", "1425000132", "1425840088", "1428270180", "1433970183", "1434180341", "1446954396", "1456974296", "1456993046", "1462145134", "1482865361", "1484984030", "1507715181", "1534802245", "1553352234", "1563510344", "1590964275", "1597977309", "1608855681", "1613588039", "1619559725", "1620863486", "1654026963", "1826367560", "100000056372239", "100000120338691", "100000176712972", "100000261372001", "100000302424575", "100000305559068", "100001070274069", "100001149813826", "100001344257302", "100001625001553", "100001691560879", "100001770444681", "100002104127646", "100002205857658", "100002669042487", "100002810791764", "100003155316433", "100003477620888", "100003883108913", "100004393178312"], "friend_count"=>152, "updated_at"=>2013-04-22 18:24:16 UTC}} flags=[] (0.9351ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (252.4228ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"5175807a151a4b1183000003", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:24:58 UTC, "created_at"=>2013-04-22 18:24:58 UTC}}} flags=[] (0.3190ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (189.1658ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (189.1589ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (409.2948ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (189.3451ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.6081ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"517580407f5ca13cd3000003"} update={"$set"=>{"influence"=>0.21039756690805692, "updated_at"=>2013-04-22 18:25:01 UTC}} flags=[] (0.2570ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (192.5850ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"517580f4151a4bb096000005", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:27:00 UTC, "created_at"=>2013-04-22 18:27:00 UTC}}} flags=[] (0.2489ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (185.0319ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (188.9248ms)


Started POST "/checkin.json" for 127.0.0.1 at 2013-04-22 11:28:31 -0700
Processing by ProfileDataController#checkin as JSON
  Parameters: {"auth_token"=>"spCdtaysYsGPPFEdcE4x", "venue_id"=>"121231", "profile_datum"=>{"auth_token"=>"spCdtaysYsGPPFEdcE4x", "venue_id"=>"121231", "controller"=>"profile_data", "action"=>"checkin", "format"=>"json"}}
WARNING: Can't verify CSRF token authenticity
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (369.8628ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"authentication_token"=>"spCdtaysYsGPPFEdcE4x"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (191.1983ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=users selector={"_id"=>"517580407f5ca13cd3000003"} update={"$push"=>{"visits"=>{"_id"=>"51758151151a4b71ca000001", "venue_id"=>"121231", "shared"=>true, "updated_at"=>2013-04-22 18:28:33 UTC, "created_at"=>2013-04-22 18:28:33 UTC}}} flags=[] (0.3779ms)
Completed 200 OK in 1697ms (Views: 0.5ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (188.0157ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (205.4489ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (189.2121ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (371.3911ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (185.2081ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (198.6620ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"51758152151a4b1630000007", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:28:34 UTC, "created_at"=>2013-04-22 18:28:34 UTC}}} flags=[] (0.2460ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.9509ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (189.7800ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (191.8480ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"5175817d151a4b1630000009", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:29:17 UTC, "created_at"=>2013-04-22 18:29:17 UTC}}} flags=[] (0.2391ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (183.3882ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.9404ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (195.8730ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"517581ab151a4b163000000b", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:30:03 UTC, "created_at"=>2013-04-22 18:30:03 UTC}}} flags=[] (0.2630ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (182.9469ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.1419ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (190.0229ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"517581d9151a4b163000000d", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:30:49 UTC, "created_at"=>2013-04-22 18:30:49 UTC}}} flags=[] (0.2441ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (181.7560ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (186.8222ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (368.2489ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (375.7489ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (373.9033ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (365.4599ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (198.2882ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"5175830a151a4bce64000001", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:35:54 UTC, "created_at"=>2013-04-22 18:35:54 UTC}}} flags=[] (0.3600ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=venues selector={"$query"=>{"venue_id"=>"121231"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (187.0499ms)
  MOPED: 54.228.8.237:59957 UPDATE       database=thanxup-prod collection=venues selector={"_id"=>"51707e66151a4baa59000001"} update={"$push"=>{"venue_visits"=>{"_id"=>"5175830b151a4b916b000002", "venue_id"=>"121231", "user_fb_id"=>"545887286", "shared"=>true, "updated_at"=>2013-04-22 18:35:55 UTC, "created_at"=>2013-04-22 18:35:55 UTC}}} flags=[] (0.2789ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (203.0253ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (232.7218ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=cupons documents=[{"_id"=>"5175830b151a4bce64000003", "cupon_id"=>"ef359d3202b2f57a93fea83558eb7ae24518bf40467b826c88899d481beca7dd", "store_id"=>"121231", "user_fb_id"=>"545887286", "parent_cupon"=>"", "used"=>false, "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-22 18:35:55 UTC, "created_at"=>2013-04-22 18:35:55 UTC}] flags=[] (0.3452ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (681.3698ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=offers selector={"$query"=>{"venue_id"=>"51707e66151a4baa59000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (193.8543ms)
  MOPED: 54.228.8.237:59957 INSERT       database=thanxup-prod collection=cupons documents=[{"_id"=>"5175830b151a4b916b000004", "cupon_id"=>"3290e64b13b4ba87eaf899884ace7062f9253f48bc69facb786ece88db0f3fb4", "store_id"=>"121231", "user_fb_id"=>"545887286", "parent_cupon"=>"", "used"=>false, "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-22 18:35:55 UTC, "created_at"=>2013-04-22 18:35:55 UTC}] flags=[] (0.3400ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (362.7388ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (374.6309ms)
  MOPED: 54.228.8.237:59957 COMMAND      database=admin command={:ismaster=>1} (371.8090ms)
  MOPED: 54.228.8.237:59957 QUERY        database=thanxup-prod collection=users selector={"$query"=>{"user_uid"=>"545887286"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (191.5162ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (354.9969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (972.6317ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.2010ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venue_visits", :query=>{}} (21.7578ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venue_visits selector={} flags=[] (0.1211ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.4311ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.1171ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"visits", :query=>{}} (210.3083ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=visits selector={} flags=[] (0.1280ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (19.3892ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.1070ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"51786d8c151a4b84b9000001", "venue_id"=>"121231", "kind"=>"Copas", "image_link"=>"https://dl.dropboxusercontent.com/u/155213031/PACO.jpeg", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-24 23:41:00 UTC, "created_at"=>2013-04-24 23:41:00 UTC}] flags=[] (0.3459ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"51786d8c151a4b84b9000002", "offer_id"=>"asdfasdf", "influence_1"=>0.1, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"51786d8c151a4b84b9000001", "updated_at"=>2013-04-24 23:41:00 UTC, "created_at"=>2013-04-24 23:41:00 UTC}] flags=[] (0.7727ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"51786d8c151a4b84b9000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51786d8c151a4b84b9000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-24 23:41:00 UTC, "created_at"=>2013-04-24 23:41:00 UTC}}} flags=[] (0.3502ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"51786d8c151a4b84b9000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51786d8c151a4b84b9000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-24 23:41:00 UTC, "created_at"=>2013-04-24 23:41:00 UTC}}} flags=[] (0.4191ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"51786d8c151a4b84b9000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51786d8c151a4b84b9000005", "parent_cupon"=>"", "template_id"=>"3", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-24 23:41:00 UTC, "created_at"=>2013-04-24 23:41:00 UTC}}} flags=[] (0.2241ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1051ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"cupons", :query=>{}} (0.8178ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=cupons selector={} flags=[] (0.1118ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venue_visits", :query=>{}} (0.7191ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venue_visits selector={} flags=[] (0.0620ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"venues", :query=>{}} (0.2630ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=venues selector={} flags=[] (0.0670ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"visits", :query=>{}} (0.7570ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=visits selector={} flags=[] (0.0622ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"offers", :query=>{}} (0.2491ms)
  MOPED: 127.0.0.1:27017 DELETE       database=thanxup_api_development collection=offers selector={} flags=[] (0.0560ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=venues documents=[{"_id"=>"51786dba151a4bba8a000001", "venue_id"=>"121231", "kind"=>"Copas", "image_link"=>"https://dl.dropboxusercontent.com/u/155213031/PACO.jpeg", "name"=>"Paco Bar", "web"=>"wwww.pacomola.com", "fb_page"=>"wwww.facebook.com/pacomola", "address"=>"Castellana 123, Madrid", "place_id"=>"145768288146", "latitude"=>"40.482471", "longitude"=>"-3.955078", "updated_at"=>2013-04-24 23:41:46 UTC, "created_at"=>2013-04-24 23:41:46 UTC}] flags=[] (0.2739ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=offers documents=[{"_id"=>"51786dba151a4bba8a000002", "offer_id"=>"asdfasdf", "influence_1"=>0.1, "influence_2"=>0.5, "influence_3"=>0.7, "fb_post"=>"Hey man, wazzup?", "offer_text"=>"Hoy te damos copa gratis si tu influencia es >40%, al resto un descuento sorpresa!", "venue_id"=>"51786dba151a4bba8a000001", "updated_at"=>2013-04-24 23:41:46 UTC, "created_at"=>2013-04-24 23:41:46 UTC}] flags=[] (0.1900ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"51786dba151a4bba8a000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51786dba151a4bba8a000003", "parent_cupon"=>"", "template_id"=>"1", "cupon_text"=>"3 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-24 23:41:46 UTC, "created_at"=>2013-04-24 23:41:46 UTC}}} flags=[] (0.2999ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"51786dba151a4bba8a000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51786dba151a4bba8a000004", "parent_cupon"=>"", "template_id"=>"2", "cupon_text"=>"5 euros de descuento en tu proxima copa", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "used"=>false, "kind"=>"SHARABLE", "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-24 23:41:46 UTC, "created_at"=>2013-04-24 23:41:46 UTC}}} flags=[] (0.1760ms)
  MOPED: 127.0.0.1:27017 UPDATE       database=thanxup_api_development collection=offers selector={"_id"=>"51786dba151a4bba8a000002"} update={"$push"=>{"cupon_templates"=>{"_id"=>"51786dba151a4bba8a000005", "parent_cupon"=>"", "template_id"=>"3", "cupon_text"=>"Tu proxima copa gratis ;)", "valid_from"=>2013-03-21 16:17:57 UTC, "valid_until"=>2013-03-27 16:17:57 UTC, "kind"=>"SHARABLE", "used"=>false, "social_text"=>"Comparte con 3 amigos y recibe una copa gratis!", "social_count"=>0, "social_limit"=>5, "social_offer"=>"", "social_from"=>2013-03-21 00:00:00 UTC, "social_until"=>2013-03-27 00:00:00 UTC, "updated_at"=>2013-04-24 23:41:46 UTC, "created_at"=>2013-04-24 23:41:46 UTC}}} flags=[] (0.1647ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.8349ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (124.6781ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1169ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.1420ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0318ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (1.2021ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.0971ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=weeklies documents=[{"_id"=>"51786e5b151a4b6170000001", "influence"=>0.23423, "shared_cupons"=>2, "consumed_ff_cupons"=>2, "user_id"=>"516b8647151a4b009b000001", "updated_at"=>2013-04-24 23:45:59 UTC, "created_at"=>2013-04-24 23:45:59 UTC}] flags=[] (0.3531ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (59.5152ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3549ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.4851ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.9248ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5969ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.1201ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (4.1778ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.6132ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.6981ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1008ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5340ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=weeklies documents=[{"_id"=>"51787052151a4b954b000001", "influence"=>0.9, "shared_cupons"=>100, "consumed_ff_cupons"=>100, "user_id"=>"516b8647151a4b009b000001", "updated_at"=>2013-04-24 23:53:35 UTC, "created_at"=>2013-04-24 23:53:35 UTC}] flags=[] (0.3397ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7653ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.6730ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.5788ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7739ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.3649ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"$query"=>{"user_id"=>"516b8647151a4b009b000001"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (34.5030ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.7390ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"$query"=>{"user_id"=>"516b8647151a4b009b000001"}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.2910ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"$query"=>{}, "$orderby"=>{"created_at"=>1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (81.4011ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"$query"=>{}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.8600ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.4733ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.2771ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9480ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"weeklies", :query=>{"user_id"=>"516b8647151a4b009b000001"}} (0.4864ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (2.4521ms)
  MOPED: 127.0.0.1:27017 INSERT       database=thanxup_api_development collection=weeklies documents=[{"_id"=>"517877b4151a4b954b000002", "user_id"=>"516b8647151a4b009b000001", "updated_at"=>2013-04-25 00:24:20 UTC, "created_at"=>2013-04-25 00:24:20 UTC}] flags=[] (0.2480ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.8070ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.9789ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=thanxup_api_development command={:count=>"weeklies", :query=>{"user_id"=>"516b8647151a4b009b000001"}} (0.7591ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.9108ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"$query"=>{"user_id"=>"516b8647151a4b009b000001"}, "$orderby"=>{"created_at"=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (0.4838ms)
  MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (1.4472ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=users selector={"$query"=>{}, "$orderby"=>{:_id=>-1}} flags=[:slave_ok] limit=-1 skip=0 batch_size=nil fields=nil (1.1370ms)
  MOPED: 127.0.0.1:27017 QUERY        database=thanxup_api_development collection=weeklies selector={"user_id"=>"516b8647151a4b009b000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.8359ms)
